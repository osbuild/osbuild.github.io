"use strict";(self.webpackChunksaurus=self.webpackChunksaurus||[]).push([[89244],{99330:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"bootc/index","title":"bootc-image-builder","description":"\x3c!--","source":"@site/docs/bootc/index.md","sourceDirName":"bootc","slug":"/bootc/","permalink":"/docs/bootc/","draft":false,"unlisted":false,"editUrl":"https://github.com/osbuild/bootc-image-builder/blob/main/README.md","tags":[],"version":"current","frontMatter":{"custom_edit_url":"https://github.com/osbuild/bootc-image-builder/blob/main/README.md"},"sidebar":"bootc"}');var t=s(74848),o=s(28453);const r={custom_edit_url:"https://github.com/osbuild/bootc-image-builder/blob/main/README.md"},l="bootc-image-builder",d={},a=[{value:"\ud83d\udd28 Installation",id:"-installation",level:2},{value:"\u270d Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\ude80 Examples",id:"-examples",level:2},{value:"Running the resulting QCOW2 file on Linux (x86_64)",id:"running-the-resulting-qcow2-file-on-linux-x86_64",level:3},{value:"qemu-system-x86_64",id:"qemu-system-x86_64",level:4},{value:"virt-install",id:"virt-install",level:4},{value:"Running the resulting QCOW2 file on macOS (aarch64)",id:"running-the-resulting-qcow2-file-on-macos-aarch64",level:3},{value:"\ud83d\udcdd Arguments",id:"-arguments",level:2},{value:"Detailed description of optional flags",id:"detailed-description-of-optional-flags",level:3},{value:"\ud83d\udcbe Image types",id:"-image-types",level:2},{value:"\ud83d\udcbe Target architecture",id:"-target-architecture",level:2},{value:"Progress types",id:"progress-types",level:2},{value:"\u2601\ufe0f Cloud uploaders",id:"\ufe0f-cloud-uploaders",level:2},{value:"Amazon Machine Images (AMIs)",id:"amazon-machine-images-amis",level:3},{value:"Prerequisites",id:"prerequisites",level:4},{value:"Flags",id:"flags",level:4},{value:"AWS credentials file",id:"aws-credentials-file",level:4},{value:"AWS credentials via environment",id:"aws-credentials-via-environment",level:4},{value:"\ud83d\udcbd Volumes",id:"-volumes",level:2},{value:"\ud83d\udcdd Build config",id:"-build-config",level:2},{value:"Users (<code>user</code>, array)",id:"users-user-array",level:3},{value:"Kernel Arguments (<code>kernel</code>, mapping)",id:"kernel-arguments-kernel-mapping",level:3},{value:"Filesystems (<code>filesystem</code>, array)",id:"filesystems-filesystem-array",level:3},{value:"Interaction with <code>rootfs</code>",id:"interaction-with-rootfs",level:4},{value:"Filesystem types",id:"filesystem-types",level:4},{value:"Allowed mountpoints and sizes",id:"allowed-mountpoints-and-sizes",level:4},{value:"Anaconda ISO (installer) options (<code>installer</code>, mapping)",id:"anaconda-iso-installer-options-installer-mapping",level:3},{value:"Anaconda ISO (installer) Modules",id:"anaconda-iso-installer-modules",level:4},{value:"Enable vs Disable priority",id:"enable-vs-disable-priority",level:5},{value:"Building",id:"building",level:2},{value:"Accessing the system",id:"accessing-the-system",level:3},{value:"Reporting bugs",id:"reporting-bugs",level:2},{value:"Contributing",id:"contributing",level:3},{value:"\ud83d\uddc4\ufe0f Repository",id:"\ufe0f-repository",level:2},{value:"\ud83d\udcca Project",id:"-project",level:2},{value:"\ud83e\uddfe License",id:"-license",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"bootc-image-builder",children:"bootc-image-builder"})}),"\n",(0,t.jsxs)(n.p,{children:["A container to create disk images from ",(0,t.jsx)(n.a,{href:"https://github.com/containers/bootc",children:"bootc"})," container inputs,\nespecially oriented towards ",(0,t.jsx)(n.a,{href:"https://docs.fedoraproject.org/en-US/bootc/",children:"Fedora/CentOS bootc"})," or\nderivatives."]}),"\n",(0,t.jsx)(n.h2,{id:"-installation",children:"\ud83d\udd28 Installation"}),"\n",(0,t.jsxs)(n.p,{children:["Have ",(0,t.jsx)(n.a,{href:"https://podman.io/",children:"podman"})," installed on your system. Either through your systems package manager if you're on\nLinux or through ",(0,t.jsx)(n.a,{href:"https://podman.io/",children:"Podman Desktop"})," if you are on macOS or Windows. If you want to run the resulting\nvirtual machine(s) or installer media you can use ",(0,t.jsx)(n.a,{href:"https://www.qemu.org/",children:"qemu"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["A very nice GUI extension for Podman Desktop is also\n",(0,t.jsx)(n.a,{href:"https://github.com/containers/podman-desktop-extension-bootc",children:"available"}),".\nThe command line examples below can be all handled by\nPodman Desktop."]}),"\n",(0,t.jsx)(n.p,{children:"On macOS, the podman machine must be running in rootful mode:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'$ podman machine stop   # if already running\nWaiting for VM to exit...\nMachine "podman-machine-default" stopped successfully\n$ podman machine set --rootful\n$ podman machine start\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-prerequisites",children:"\u270d Prerequisites"}),"\n",(0,t.jsxs)(n.p,{children:["If you are on a system with SELinux enforced: The package ",(0,t.jsx)(n.code,{children:"osbuild-selinux"})," or equivalent osbuild SELinux policies must be installed in the system running\n",(0,t.jsx)(n.code,{children:"bootc-image-builder"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"-examples",children:"\ud83d\ude80 Examples"}),"\n",(0,t.jsxs)(n.p,{children:["The following example builds a ",(0,t.jsx)(n.code,{children:"centos-bootc:stream9"})," bootable container into a QCOW2 image for the architecture you're running\nthe command on.  However, be sure to see the ",(0,t.jsx)(n.a,{href:"https://docs.fedoraproject.org/en-US/bootc/",children:"upstream documentation"}),"\nfor more general information!  Note that outside of initial experimentation, it's recommended to build a ",(0,t.jsx)(n.em,{children:"derived"})," container image\n(or reuse a derived image built via someone else) and then use this project to make a disk image from your custom image."]}),"\n",(0,t.jsxs)(n.p,{children:["The generic base images do not include a default user. This example injects a ",(0,t.jsx)(n.a,{href:"#-build-config",children:"user configuration file"}),"\nby adding a volume-mount for the local file to the bootc-image-builder container."]}),"\n",(0,t.jsxs)(n.p,{children:["The following command will create a QCOW2 disk image. First, create ",(0,t.jsx)(n.code,{children:"./config.toml"})," as described above to configure user access."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ensure the image is fetched\nsudo podman pull quay.io/centos-bootc/centos-bootc:stream9\nmkdir output\nsudo podman run \\\n    --rm \\\n    -it \\\n    --privileged \\\n    --pull=newer \\\n    --security-opt label=type:unconfined_t \\\n    -v ./config.toml:/config.toml:ro \\\n    -v ./output:/output \\\n    -v /var/lib/containers/storage:/var/lib/containers/storage \\\n    quay.io/centos-bootc/bootc-image-builder:latest \\\n    --type qcow2 \\\n\t--use-librepo=True \\\n    quay.io/centos-bootc/centos-bootc:stream9\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note that some images (like fedora) do not have a default root\nfilesystem type. In this case adds the switch ",(0,t.jsx)(n.code,{children:"--rootfs <type>"}),",\ne.g. ",(0,t.jsx)(n.code,{children:"--rootfs btrfs"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"running-the-resulting-qcow2-file-on-linux-x86_64",children:"Running the resulting QCOW2 file on Linux (x86_64)"}),"\n",(0,t.jsxs)(n.p,{children:["A virtual machine can be launched using ",(0,t.jsx)(n.code,{children:"qemu-system-x86_64"})," or with ",(0,t.jsx)(n.code,{children:"virt-install"})," as shown below;\nhowever there is more information about virtualization and other\nchoices in the ",(0,t.jsx)(n.a,{href:"https://docs.fedoraproject.org/en-US/bootc/",children:"Fedora/CentOS bootc documentation"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"qemu-system-x86_64",children:"qemu-system-x86_64"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"qemu-system-x86_64 \\\n    -M accel=kvm \\\n    -cpu host \\\n    -smp 2 \\\n    -m 4096 \\\n    -bios /usr/share/OVMF/OVMF_CODE.fd \\\n    -serial stdio \\\n    -snapshot output/qcow2/disk.qcow2\n"})}),"\n",(0,t.jsx)(n.h4,{id:"virt-install",children:"virt-install"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo virt-install \\\n    --name fedora-bootc \\\n    --cpu host \\\n    --vcpus 4 \\\n    --memory 4096 \\\n    --import --disk ./output/qcow2/disk.qcow2,format=qcow2 \\\n    --os-variant fedora-eln\n"})}),"\n",(0,t.jsx)(n.h3,{id:"running-the-resulting-qcow2-file-on-macos-aarch64",children:"Running the resulting QCOW2 file on macOS (aarch64)"}),"\n",(0,t.jsxs)(n.p,{children:["This assumes qemu was installed through ",(0,t.jsx)(n.a,{href:"https://brew.sh/",children:"homebrew"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"qemu-system-aarch64 \\\n    -M accel=hvf \\\n    -cpu host \\\n    -smp 2 \\\n    -m 4096 \\\n    -bios /opt/homebrew/Cellar/qemu/8.1.3_2/share/qemu/edk2-aarch64-code.fd \\\n    -serial stdio \\\n    -machine virt \\\n    -snapshot output/qcow2/disk.qcow2\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-arguments",children:"\ud83d\udcdd Arguments"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'Usage:\n  sudo podman run \\\n    --rm \\\n    -it \\\n    --privileged \\\n    --pull=newer \\\n    --security-opt label=type:unconfined_t \\\n    -v ./output:/output \\\n    -v /var/lib/containers/storage:/var/lib/containers/storage \\\n    quay.io/centos-bootc/bootc-image-builder:latest \\\n    <imgref>\n\nFlags:\n      --chown string          chown the ouput directory to match the specified UID:GID\n      --output string         artifact output directory (default ".")\n      --progress string       type of progress bar to use (e.g. verbose,term) (default "auto")\n      --rootfs string         Root filesystem type. If not given, the default configured in the source container image is used.\n      --target-arch string    build for the given target architecture (experimental)\n      --type stringArray      image types to build [ami, anaconda-iso, gce, iso, qcow2, raw, vhd, vmdk] (default [qcow2])\n      --version               version for bootc-image-builder\n\nGlobal Flags:\n      --log-level string   logging level (debug, info, error); default error\n  -v, --verbose            Switch to verbose mode\n'})}),"\n",(0,t.jsx)(n.h3,{id:"detailed-description-of-optional-flags",children:"Detailed description of optional flags"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Argument"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Default Value"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--chown"}),(0,t.jsxs)(n.td,{children:["chown the output directory to match the specified UID",":GID"]}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--output"}),(0,t.jsx)(n.td,{children:"output the artifact into the given output directory"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)(n.code,{children:"."})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--progress"}),(0,t.jsx)(n.td,{children:"Show progress in the given format, supported: verbose,term,debug. If empty it is auto-detected"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)(n.code,{children:"auto"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"--rootfs"})}),(0,t.jsx)(n.td,{children:"Root filesystem type. Overrides the default from the source container. Supported values: ext4, xfs, btrfs"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"--type"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"#-image-types",children:"Image type"})," to build (can be passed multiple times)"]}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)(n.code,{children:"qcow2"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--target-arch"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"#-target-architecture",children:"Target arch"})," to build"]}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u274c"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--log-level"}),(0,t.jsx)(n.td,{children:"Change log level (debug, info, error)"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)(n.code,{children:"error"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"-v,--verbose"}),(0,t.jsx)(n.td,{children:"Switch output/progress to verbose mode (implies --log-level=info)"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)(n.code,{children:"false"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--use-librepo"}),(0,t.jsx)(n.td,{children:"Download rpms using librepo (faster and more robust)"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:(0,t.jsx)(n.code,{children:"false"})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--type"})," parameter can be given multiple times and multiple\noutputs will be produced. Note that comma or space separating the\n",(0,t.jsx)(n.code,{children:"image-types"}),"will not work, but this example will: ",(0,t.jsx)(n.code,{children:"--type qcow2 --type ami"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["\ud83d\udca1 Tip: Flags in ",(0,t.jsx)(n.strong,{children:"bold"})," are the most important ones."]})}),"\n",(0,t.jsx)(n.h2,{id:"-image-types",children:"\ud83d\udcbe Image types"}),"\n",(0,t.jsxs)(n.p,{children:["The following image types are currently available via the ",(0,t.jsx)(n.code,{children:"--type"})," argument:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Image type"}),(0,t.jsx)(n.th,{children:"Target environment"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ami"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html",children:"Amazon Machine Image"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"qcow2"})," ",(0,t.jsx)(n.strong,{children:"(default)"})]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://www.qemu.org/",children:"QEMU"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"vmdk"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/VMDK",children:"VMDK"})," usable in vSphere, among others"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"anaconda-iso"})}),(0,t.jsx)(n.td,{children:"An unattended Anaconda installer that installs to the first disk found."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"raw"})}),(0,t.jsxs)(n.td,{children:["Unformatted ",(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Rawdisk",children:"raw disk"}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"vhd"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/VHD_(file_format)",children:"vhd"})," usable in Virtual PC, among others"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gce"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://cloud.google.com/compute/docs/images#custom_images",children:"GCE"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"-target-architecture",children:"\ud83d\udcbe Target architecture"}),"\n",(0,t.jsxs)(n.p,{children:["Specify the target architecture of the system on which the disk image will be installed on. By default,\n",(0,t.jsx)(n.code,{children:"bootc-image-builder"})," will build for the native host architecture. The target architecture\nmust match an available architecture of the ",(0,t.jsx)(n.code,{children:"bootc-image-builder"})," image you are using to build the disk image.\nNavigate to the ",(0,t.jsx)(n.a,{href:"https://quay.io/repository/centos-bootc/bootc-image-builder?tab=tags",children:"centos-image-builder repository tags page"}),"\nand hover over the Tux icons to see the supported target architectures.\nThe architecture of the bootc OCI image and the bootc-image-builder image must match. For example, when building\na non-native architecture bootc OCI image, say, building for x86_64 from an arm-based Mac, it is possible to run\n",(0,t.jsx)(n.code,{children:"podman build"})," with the ",(0,t.jsx)(n.code,{children:"--platform linux/amd64"})," flag. In this case, to then build a disk image from the same arm-based Mac,\nyou should provide ",(0,t.jsx)(n.code,{children:"--target-arch amd64"})," when running the ",(0,t.jsx)(n.code,{children:"bootc-image-builder"})," command."]}),"\n",(0,t.jsx)(n.h2,{id:"progress-types",children:"Progress types"}),"\n",(0,t.jsx)(n.p,{children:"The following progress types are supported:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"verbose: No spinners or progress bar, just information and full osbuild output"}),"\n",(0,t.jsx)(n.li,{children:"term: Terminal based output, spinner, progressbar and most details of osbuild are hidden"}),"\n",(0,t.jsx)(n.li,{children:"debug: Details how the progress is called, mostly useful for bugreports"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Note that when no value is given the progress is auto-detected baed on the environment. When ",(0,t.jsx)(n.code,{children:"stdin"}),' is a terminal the "term" progress is used, otherwise "verbose". The output of ',(0,t.jsx)(n.code,{children:"verbose"})," is exactaly the same as it was before progress reporting was implemented."]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-cloud-uploaders",children:"\u2601\ufe0f Cloud uploaders"}),"\n",(0,t.jsx)(n.h3,{id:"amazon-machine-images-amis",children:"Amazon Machine Images (AMIs)"}),"\n",(0,t.jsx)(n.h4,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.p,{children:["In order to successfully import an AMI into your AWS account, you need to have the ",(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/vm-import/latest/userguide/required-permissions.html",children:"vmimport service role"})," configured on your account with the following additional permissions:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'{\n    "Effect": "Allow",\n    "Action": [\n        "s3:ListAllMyBuckets",\n        "s3:GetBucketAcl",\n        "s3:DeleteObject"\n    ],\n    "Resource": [\n        "arn:aws:s3:::amzn-s3-demo-import-bucket",\n        "arn:aws:s3:::amzn-s3-demo-import-bucket/*",\n        "arn:aws:s3:::amzn-s3-demo-export-bucket",\n        "arn:aws:s3:::amzn-s3-demo-export-bucket/*"\n    ]\n},\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Replace ",(0,t.jsx)(n.code,{children:"amzn-s3-demo-import-bucket"})," in the ARN with the bucket name."]}),"\n",(0,t.jsx)(n.h4,{id:"flags",children:"Flags"}),"\n",(0,t.jsx)(n.p,{children:"AMIs can be automatically uploaded to AWS by specifying the following flags:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Argument"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--aws-ami-name"}),(0,t.jsx)(n.td,{children:"Name for the AMI in AWS"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--aws-bucket"}),(0,t.jsx)(n.td,{children:"Target S3 bucket name for intermediate storage when creating AMI"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"--aws-region"}),(0,t.jsx)(n.td,{children:"Target region for AWS uploads"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Notes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.em,{children:"These flags must all be specified together. If none are specified, the AMI is exported to the output directory."})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.em,{children:"The bucket must already exist in the selected region, bootc-image-builder will not create it if it is missing."})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.em,{children:"The output volume is not needed in this case. The image is uploaded to AWS and not exported."})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"aws-credentials-file",children:"AWS credentials file"}),"\n",(0,t.jsxs)(n.p,{children:["If you already have a credentials file (usually in ",(0,t.jsx)(n.code,{children:"$HOME/.aws/credentials"}),") you need to forward the\ndirectory to the container"]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo podman run \\\n  --rm \\\n  -it \\\n  --privileged \\\n  --pull=newer \\\n  --security-opt label=type:unconfined_t \\\n  -v $HOME/.aws:/root/.aws:ro \\\n  -v /var/lib/containers/storage:/var/lib/containers/storage \\\n  --env AWS_PROFILE=default \\\n  quay.io/centos-bootc/bootc-image-builder:latest \\\n  --type ami \\\n  --aws-ami-name centos-bootc-ami \\\n  --aws-bucket fedora-bootc-bucket \\\n  --aws-region us-east-1 \\\n  quay.io/centos-bootc/centos-bootc:stream9\n"})}),"\n",(0,t.jsx)(n.p,{children:"Notes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.em,{children:["you can also inject ",(0,t.jsx)(n.strong,{children:"ALL"})," your AWS configuration parameters with ",(0,t.jsx)(n.code,{children:"--env AWS_*"})]})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["see the ",(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html",children:"AWS CLI documentation"})," for more information about other environment variables"]}),"\n",(0,t.jsx)(n.h4,{id:"aws-credentials-via-environment",children:"AWS credentials via environment"}),"\n",(0,t.jsx)(n.p,{children:"AWS credentials can be specified through two environment variables:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable name"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AWS_ACCESS_KEY_ID"}),(0,t.jsx)(n.td,{children:"AWS access key associated with an IAM account."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"AWS_SECRET_ACCESS_KEY"}),(0,t.jsx)(n.td,{children:'Specifies the secret key associated with the access key. This is essentially the "password" for the access key.'})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Those ",(0,t.jsx)(n.strong,{children:"should not"})," be specified with ",(0,t.jsx)(n.code,{children:"--env"})," as plain value, but you can silently hand them over with ",(0,t.jsx)(n.code,{children:"--env AWS_*"})," or\nsave these variables in a file and pass them using the ",(0,t.jsx)(n.code,{children:"--env-file"})," flag for ",(0,t.jsx)(n.code,{children:"podman run"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ cat aws.secrets\nAWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE\nAWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\n\n$ sudo podman run \\\n  --rm \\\n  -it \\\n  --privileged \\\n  --pull=newer \\\n  --security-opt label=type:unconfined_t \\\n  -v /var/lib/containers/storage:/var/lib/containers/storage \\\n  --env-file=aws.secrets \\\n  quay.io/centos-bootc/bootc-image-builder:latest \\\n  --type ami \\\n  --aws-ami-name centos-bootc-ami \\\n  --aws-bucket centos-bootc-bucket \\\n  --aws-region us-east-1 \\\n  quay.io/centos-bootc/centos-bootc:stream9\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-volumes",children:"\ud83d\udcbd Volumes"}),"\n",(0,t.jsx)(n.p,{children:"The following volumes can be mounted inside the container:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Volume"}),(0,t.jsx)(n.th,{children:"Purpose"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/output"})}),(0,t.jsx)(n.td,{children:"Used for storing the resulting artifacts"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/store"})}),(0,t.jsxs)(n.td,{children:["Used for the ",(0,t.jsx)(n.a,{href:"https://www.osbuild.org/",children:"osbuild store"})]}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/rpmmd"})}),(0,t.jsx)(n.td,{children:"Used for the DNF cache"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"-build-config",children:"\ud83d\udcdd Build config"}),"\n",(0,t.jsxs)(n.p,{children:["A build config is a Toml (or JSON) file with customizations for the resulting image. The config file is mapped into the container directory to ",(0,t.jsx)(n.code,{children:"/config.toml"}),". The customizations are specified under a ",(0,t.jsx)(n.code,{children:"customizations"})," object."]}),"\n",(0,t.jsx)(n.p,{children:"As an example, let's show how you can add a user to the image:"}),"\n",(0,t.jsxs)(n.p,{children:["Firstly create a file ",(0,t.jsx)(n.code,{children:"./config.toml"})," and put the following content into it:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.user]]\nname = "alice"\npassword = "bob"\nkey = "ssh-rsa AAA ... user@email.com"\ngroups = ["wheel"]\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Then, run ",(0,t.jsx)(n.code,{children:"bootc-image-builder"})," with the following arguments:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo podman run \\\n    --rm \\\n    -it \\\n    --privileged \\\n    --pull=newer \\\n    --security-opt label=type:unconfined_t \\\n    -v ./config.toml:/config.toml:ro \\\n    -v ./output:/output \\\n    -v /var/lib/containers/storage:/var/lib/containers/storage \\\n    quay.io/centos-bootc/bootc-image-builder:latest \\\n    --type qcow2 \\\n    quay.io/centos-bootc/centos-bootc:stream9\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The configuration can also be passed in via stdin when ",(0,t.jsx)(n.code,{children:"--config -"}),"\nis used. Only JSON configuration is supported in this mode."]}),"\n",(0,t.jsxs)(n.p,{children:["Additionally, images can embed a build config file, either as\n",(0,t.jsx)(n.code,{children:"config.json"})," or ",(0,t.jsx)(n.code,{children:"config.toml"})," in the ",(0,t.jsx)(n.code,{children:"/usr/lib/bootc-image-builder"}),"\ndirectory. If this exist, and contains filesystem or disk\ncustomizations, then these are used by default if no such\ncustomization are specified in the regular build config."]}),"\n",(0,t.jsxs)(n.h3,{id:"users-user-array",children:["Users (",(0,t.jsx)(n.code,{children:"user"}),", array)"]}),"\n",(0,t.jsx)(n.p,{children:"Possible fields:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Use"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Required"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"Name of the user"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"password"})}),(0,t.jsx)(n.td,{children:"Unencrypted password"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"key"})}),(0,t.jsx)(n.td,{children:"Public SSH key contents"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"groups"})}),(0,t.jsx)(n.td,{children:"An array of secondary to put the user into"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"No"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "user": [\n      {\n        "name": "alice",\n        "password": "bob",\n        "key": "ssh-rsa AAA ... user@email.com",\n        "groups": [\n          "wheel",\n          "admins"\n        ]\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"kernel-arguments-kernel-mapping",children:["Kernel Arguments (",(0,t.jsx)(n.code,{children:"kernel"}),", mapping)"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "kernel": {\n      "append": "mitigations=auto,nosmt"\n    }\n  }\n}\n\n'})}),"\n",(0,t.jsxs)(n.h3,{id:"filesystems-filesystem-array",children:["Filesystems (",(0,t.jsx)(n.code,{children:"filesystem"}),", array)"]}),"\n",(0,t.jsxs)(n.p,{children:["The filesystem section of the customizations can be used to set the minimum size of the base partitions (",(0,t.jsx)(n.code,{children:"/"})," and ",(0,t.jsx)(n.code,{children:"/boot"}),") as well as to create extra partitions with mountpoints under ",(0,t.jsx)(n.code,{children:"/var"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.filesystem]]\nmountpoint = "/"\nminsize = "10 GiB"\n\n[[customizations.filesystem]]\nmountpoint = "/var/data"\nminsize = "20 GiB"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "filesystem": [\n      {\n        "mountpoint": "/",\n        "minsize": "10 GiB"\n      },\n      {\n        "mountpoint": "/var/data",\n        "minsize": "20 GiB"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.h4,{id:"interaction-with-rootfs",children:["Interaction with ",(0,t.jsx)(n.code,{children:"rootfs"})]}),"\n",(0,t.jsx)(n.h4,{id:"filesystem-types",children:"Filesystem types"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"--rootfs"})," option also sets the filesystem types for all additional mountpoints, where appropriate. See the see ",(0,t.jsx)(n.a,{href:"#detailed-description-of-optional-flags",children:"Detailed description of optional flags"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"allowed-mountpoints-and-sizes",children:"Allowed mountpoints and sizes"}),"\n",(0,t.jsxs)(n.p,{children:["The following restrictions and rules apply, unless the rootfs is ",(0,t.jsx)(n.code,{children:"btrfs"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/"})," can be specified to set the desired (minimum) size of the root filesystem. The final size of the filesystem, mounted at ",(0,t.jsx)(n.code,{children:"/sysroot"})," on a booted system, is the value specified in this configuration or 2x the size of the base container, whichever is largest."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/boot"}),"can be specified to set the desired size of the boot partition."]}),"\n",(0,t.jsxs)(n.li,{children:["Subdirectories of ",(0,t.jsx)(n.code,{children:"/var"})," are supported, but symlinks in ",(0,t.jsx)(n.code,{children:"/var"})," are not. For example, ",(0,t.jsx)(n.code,{children:"/var/home"})," and ",(0,t.jsx)(n.code,{children:"/var/run"})," are symlinks and cannot be filesystems on their own."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/var"})," itself cannot be a mountpoint."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"rootfs"})," option (or source container config, see ",(0,t.jsx)(n.a,{href:"#detailed-description-of-optional-flags",children:"Detailed description of optional flags"})," section) defines the filesystem type for the root filesystem. Currently, creation of btrfs subvolumes at build time is not supported. Therefore, if the ",(0,t.jsx)(n.code,{children:"rootfs"})," is ",(0,t.jsx)(n.code,{children:"btrfs"}),", no custom mountpoints are supported under ",(0,t.jsx)(n.code,{children:"/var"}),".  Only ",(0,t.jsx)(n.code,{children:"/"})," and ",(0,t.jsx)(n.code,{children:"/boot"})," can be configured."]}),"\n",(0,t.jsxs)(n.h3,{id:"anaconda-iso-installer-options-installer-mapping",children:["Anaconda ISO (installer) options (",(0,t.jsx)(n.code,{children:"installer"}),", mapping)"]}),"\n",(0,t.jsxs)(n.p,{children:["Users can include kickstart file content that will be added to an ISO build to configure the installation process. When using custom kickstart scripts the customization needs to be done via the custom kickstart script. For example using a ",(0,t.jsx)(n.code,{children:"[customizations.user]"})," block alongside a ",(0,t.jsx)(n.code,{children:"[customizations.installer.kickstart]"})," block is not supported. See this issue [",(0,t.jsx)(n.a,{href:"https://github.com/osbuild/bootc-image-builder/issues/528",children:"https://github.com/osbuild/bootc-image-builder/issues/528"}),"]"," for additional detail."]}),"\n",(0,t.jsx)(n.p,{children:"Since multi-line strings are difficult to write and read in json, it's easier to use the toml format when adding kickstart contents:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer.kickstart]\ncontents = """\ntext --non-interactive\nzerombr\nclearpart --all --initlabel --disklabel=gpt\nautopart --noswap --type=lvm\nnetwork --bootproto=dhcp --device=link --activate --onboot=on\n"""\n'})}),"\n",(0,t.jsx)(n.p,{children:"The equivalent in json would be:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "installer": {\n      "kickstart": {\n        "contents": "text --non-interactive\\nzerombr\\nclearpart --all --initlabel --disklabel=gpt\\nautopart --noswap --type=lvm\\nnetwork --bootproto=dhcp --device=link --activate --onboot=on"\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Note that bootc-image-builder will automatically add the command that installs the container image (",(0,t.jsx)(n.code,{children:"ostreecontainer ..."}),"), so this line or any line that conflicts with it should not be included. See the relevant ",(0,t.jsx)(n.a,{href:"https://pykickstart.readthedocs.io/en/latest/kickstart-docs.html#ostreecontainer",children:"Kickstart documentation"})," for more information.\nNo other kickstart commands are added by bootc-image-builder in this case, so it is the responsibility of the user to provide all other commands (for example, for partitioning, network, language, etc)."]}),"\n",(0,t.jsx)(n.h4,{id:"anaconda-iso-installer-modules",children:"Anaconda ISO (installer) Modules"}),"\n",(0,t.jsx)(n.p,{children:"The Anaconda installer can be configured by enabling or disabling its dbus modules."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer.modules]\nenable = [\n  "org.fedoraproject.Anaconda.Modules.Localization"\n]\ndisable = [\n  "org.fedoraproject.Anaconda.Modules.Users"\n]\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "installer": {\n      "modules": {\n        "enable": [\n          "org.fedoraproject.Anaconda.Modules.Localization"\n        ],\n        "disable": [\n          "org.fedoraproject.Anaconda.Modules.Users"\n        ]\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"The following module names are known and supported:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Localization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Network"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Payloads"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Runtime"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Security"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Services"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Storage"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Subscription"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Timezone"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Users"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Note: The values are not validated. Any name listed under ",(0,t.jsx)(n.code,{children:"enable"})," will be added to the Anaconda configuration. This way, new or unknown modules can be enabled. However, it also means that mistyped or incorrect values may cause Anaconda to fail to start."]})}),"\n",(0,t.jsx)(n.p,{children:"By default, the following modules are enabled for all Anaconda ISOs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Network"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Payloads"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Security"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Services"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Storage"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Users"})}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"enable-vs-disable-priority",children:"Enable vs Disable priority"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"disable"})," list is processed after the ",(0,t.jsx)(n.code,{children:"enable"})," list and therefore takes priority. In other words, adding the same module in both ",(0,t.jsx)(n.code,{children:"enable"})," and ",(0,t.jsx)(n.code,{children:"disable"})," will result in the module being ",(0,t.jsx)(n.strong,{children:"disabled"}),".\nFurthermore, adding a module that is enabled by default to ",(0,t.jsx)(n.code,{children:"disable"})," will result in the module being ",(0,t.jsx)(n.strong,{children:"disabled"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"building",children:"Building"}),"\n",(0,t.jsx)(n.p,{children:"To build the container locally you can run"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo podman build --tag bootc-image-builder .\n"})}),"\n",(0,t.jsxs)(n.p,{children:["NOTE: running already the ",(0,t.jsx)(n.code,{children:"podman build"})," as root avoids problems later as we need to run the building\nof the image as root anyway"]}),"\n",(0,t.jsx)(n.h3,{id:"accessing-the-system",children:"Accessing the system"}),"\n",(0,t.jsxs)(n.p,{children:["With a virtual machine launched with the above ",(0,t.jsx)(n.a,{href:"#virt-install",children:"virt-install"})," example, access the system with"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"ssh -i /path/to/private/ssh-key alice@ip-address\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Note that if you do not provide a password for the provided user, ",(0,t.jsx)(n.code,{children:"sudo"})," will not work unless passwordless sudo\nis configured. The base image ",(0,t.jsx)(n.code,{children:"quay.io/centos-bootc/centos-bootc:stream9"})," does not configure passwordless sudo.\nThis can be configured in a derived bootc container by including the following in a Containerfile."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:"FROM quay.io/centos-bootc/centos-bootc:stream9\nADD wheel-passwordless-sudo /etc/sudoers.d/wheel-passwordless-sudo\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The contents of the file ",(0,t.jsx)(n.code,{children:"wheel-passwordless-sudo"})," should be"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"%wheel ALL=(ALL) NOPASSWD: ALL\n"})}),"\n",(0,t.jsx)(n.h2,{id:"reporting-bugs",children:"Reporting bugs"}),"\n",(0,t.jsxs)(n.p,{children:["Please report bugs to the ",(0,t.jsx)(n.a,{href:"https://github.com/osbuild/bootc-image-builder/issues",children:"Bug Tracker"})," and include instructions to reproduce and the output of:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ sudo podman run --rm -it quay.io/centos-bootc/bootc-image-builder:latest version\n"})}),"\n",(0,t.jsx)(n.h3,{id:"contributing",children:"Contributing"}),"\n",(0,t.jsxs)(n.p,{children:["Please refer to the ",(0,t.jsx)(n.a,{href:"https://www.osbuild.org/docs/developer-guide/index",children:"developer guide"})," to learn about our\nworkflow, code style and more."]}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-repository",children:"\ud83d\uddc4\ufe0f Repository"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"web"}),":   ",(0,t.jsx)(n.a,{href:"https://github.com/osbuild/bootc-image-builder",children:"https://github.com/osbuild/bootc-image-builder"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"https"}),": ",(0,t.jsx)(n.code,{children:"https://github.com/osbuild/bootc-image-builder.git"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ssh"}),":   ",(0,t.jsx)(n.code,{children:"git@github.com:osbuild/bootc-image-builder.git"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-project",children:"\ud83d\udcca Project"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Website"}),": ",(0,t.jsx)(n.a,{href:"https://www.osbuild.org",children:"https://www.osbuild.org"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bug Tracker"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/osbuild/bootc-image-builder/issues",children:"https://github.com/osbuild/bootc-image-builder/issues"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Discussions"}),": ",(0,t.jsx)(n.a,{href:"https://github.com/orgs/osbuild/discussions",children:"https://github.com/orgs/osbuild/discussions"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Matrix"}),": ",(0,t.jsx)(n.a,{href:"https://matrix.to/#/#image-builder:fedoraproject.org",children:"#image-builder on fedoraproject.org"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-license",children:"\ud83e\uddfe License"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Apache-2.0"})}),"\n",(0,t.jsx)(n.li,{children:"See LICENSE file for details."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(96540);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);