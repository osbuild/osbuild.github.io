"use strict";(self.webpackChunksaurus=self.webpackChunksaurus||[]).push([[33828],{29550:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"developer-guide/projects/osbuild-composer/CONTRIBUTING","title":"Contributing to osbuild-composer","description":"\x3c!--","source":"@site/docs/developer-guide/02-projects/osbuild-composer/CONTRIBUTING.md","sourceDirName":"developer-guide/02-projects/osbuild-composer","slug":"/developer-guide/projects/osbuild-composer/CONTRIBUTING","permalink":"/docs/developer-guide/projects/osbuild-composer/CONTRIBUTING","draft":false,"unlisted":false,"editUrl":"https://github.com/osbuild/osbuild-composer/blob/main/CONTRIBUTING.md","tags":[],"version":"current","frontMatter":{"custom_edit_url":"https://github.com/osbuild/osbuild-composer/blob/main/CONTRIBUTING.md"},"sidebar":"developer","previous":{"title":"OSBuild Composer","permalink":"/docs/developer-guide/projects/osbuild-composer/"},"next":{"title":"Deploying osbuild-composer","permalink":"/docs/developer-guide/projects/osbuild-composer/DEPLOYING"}}');var t=n(74848),i=n(28453);const r={custom_edit_url:"https://github.com/osbuild/osbuild-composer/blob/main/CONTRIBUTING.md"},l="Contributing to osbuild-composer",d={},c=[{value:"Running from sources",id:"running-from-sources",level:3},{value:"Testing",id:"testing",level:3},{value:"Planning the work",id:"planning-the-work",level:3},{value:"Creating a PR",id:"creating-a-pr",level:3},{value:"Notes:",id:"notes",level:3}];function u(e){const o={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"contributing-to-osbuild-composer",children:"Contributing to osbuild-composer"})}),"\n",(0,t.jsxs)(o.p,{children:["First of all, thank you for taking the time to contribute to osbuild-composer.\nIn this document you will find information that can help you with your\ncontribution.\nFor more information feel free to read our ",(0,t.jsx)(o.a,{href:"https://www.osbuild.org/docs/developer-guide/index",children:"developer guide"}),"."]}),"\n",(0,t.jsx)(o.h3,{id:"running-from-sources",children:"Running from sources"}),"\n",(0,t.jsx)(o.p,{children:"We recommend using the latest stable Fedora for development but latest minor\nrelease of RHEL/CentOS 8 should work just fine as well. To run osbuild-composer\nfrom sources, follow these steps:"}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsx)(o.li,{children:"Clone the repository and create a local checkout:"}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"$ git clone https://github.com/osbuild/osbuild-composer.git\n$ cd osbuild-composer\n"})}),"\n",(0,t.jsxs)(o.ol,{start:"2",children:["\n",(0,t.jsx)(o.li,{children:"To install the build-requirements for Fedora and friends, use:"}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"$ sudo dnf group install -y 'RPM Development Tools'   # Install rpmbuild\n$ sudo dnf builddep -y osbuild-composer.spec          # Install build-time dependencies\n$ sudo dnf -y install cockpit-composer             # Optional: Install cockpit integration\n$ sudo systemctl start cockpit.socket              # Optional: Start cockpit\n"})}),"\n",(0,t.jsxs)(o.ol,{start:"3",children:["\n",(0,t.jsx)(o.li,{children:"Finally, use the following to compile the project from the working\ndirectory, install it, and then run it:"}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"$ rm -rf rpmbuild/\n$ make rpm\n$ sudo dnf -y install rpmbuild/RPMS/x86_64/*\n$ sudo systemctl start osbuild-composer.socket\n"})}),"\n",(0,t.jsxs)(o.p,{children:["You can now open ",(0,t.jsx)(o.a,{href:"https://localhost:9090",children:"https://localhost:9090"}),' in your browser to open cockpit console\nand check the "Image Builder" section.']}),"\n",(0,t.jsxs)(o.p,{children:["Alternatively you can use ",(0,t.jsx)(o.code,{children:"composer-cli"})," to interact with the Weldr API. We\ndon't have any client for the RCM API, so the only option there is a\nplain ",(0,t.jsx)(o.code,{children:"curl"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["When developing the code, use ",(0,t.jsx)(o.code,{children:"go"})," executable to generate, build, run, and test you\ncode [1], alternatively you can use the script ",(0,t.jsx)(o.code,{children:"tools/prepare-source.sh"}),":"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"$ go test ./...\n$ go build ./...\n$ go generate ./...\n"})}),"\n",(0,t.jsx)(o.h3,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(o.p,{children:["See ",(0,t.jsx)(o.a,{href:"/docs/developer-guide/projects/osbuild-composer/test/",children:"test/README.md"})," for more information about testing."]}),"\n",(0,t.jsx)(o.h3,{id:"planning-the-work",children:"Planning the work"}),"\n",(0,t.jsx)(o.p,{children:"In general we encourage you to first fill in an issue and discuss the feature\nyou would like to work on before you start. This can prevent the scenario where\nyou work on something we don't want to include in our code."}),"\n",(0,t.jsx)(o.p,{children:"That being said, you are of course welcome to implement an example of what you\nwould like to achieve."}),"\n",(0,t.jsx)(o.h3,{id:"creating-a-pr",children:"Creating a PR"}),"\n",(0,t.jsx)(o.p,{children:"The commits in the PR should have these properties:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["Preferably minimal and well documented","\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"Where minimal means: don't do unrelated changes even if the code is\nobviously wrong"}),"\n",(0,t.jsx)(o.li,{children:"Well documented: both code and commit message"}),"\n",(0,t.jsxs)(o.li,{children:["The commit message should start with the module you work on,\nlike: ",(0,t.jsx)(o.code,{children:"weldr: "}),", or ",(0,t.jsx)(o.code,{children:"distro:"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["The code should compile and the composer should start, so that we can run\n",(0,t.jsx)(o.code,{children:"git bisect"})," on it"]}),"\n",(0,t.jsx)(o.li,{children:"All code should be covered by unit-tests"}),"\n"]}),"\n",(0,t.jsx)(o.h3,{id:"notes",children:"Notes:"}),"\n",(0,t.jsxs)(o.p,{children:["[1] If you are running macOS, you can still compile osbuild-composer. If it\ndoesn't work out of the box, use ",(0,t.jsx)(o.code,{children:"-tags macos"})," together with any ",(0,t.jsx)(o.code,{children:"go"}),"\ncommand, for example: ",(0,t.jsx)(o.code,{children:"go test -tags macos ./..."})]})]})}function a(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},28453:(e,o,n)=>{n.d(o,{R:()=>r,x:()=>l});var s=n(96540);const t={},i=s.createContext(t);function r(e){const o=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(i.Provider,{value:o},e.children)}}}]);