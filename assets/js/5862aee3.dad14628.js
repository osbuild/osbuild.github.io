"use strict";(self.webpackChunksaurus=self.webpackChunksaurus||[]).push([[5822],{63521:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>o,contentTitle:()=>d,default:()=>u,frontMatter:()=>r,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"developer-guide/projects/osbuild/index","title":"OSBuild","description":"\x3c!--","source":"@site/docs/developer-guide/02-projects/osbuild/index.md","sourceDirName":"developer-guide/02-projects/osbuild","slug":"/developer-guide/projects/osbuild/","permalink":"/docs/developer-guide/projects/osbuild/","draft":false,"unlisted":false,"editUrl":"https://github.com/osbuild/osbuild/blob/main/README.md","tags":[],"version":"current","frontMatter":{"custom_edit_url":"https://github.com/osbuild/osbuild/blob/main/README.md"},"sidebar":"developer","previous":{"title":"osbuild/images testing information","permalink":"/docs/developer-guide/projects/images/test/"},"next":{"title":"Contributing","permalink":"/docs/developer-guide/projects/osbuild/contributing"}}');var l=s(74848),t=s(28453);const r={custom_edit_url:"https://github.com/osbuild/osbuild/blob/main/README.md"},d="OSBuild",o={},c=[{value:"Project",id:"project",level:2},{value:"Principles",id:"principles",level:3},{value:"Contributing",id:"contributing",level:3},{value:"Requirements",id:"requirements",level:2},{value:"Build",id:"build",level:2},{value:"Installation",id:"installation",level:2},{value:"Repository",id:"repository",level:2},{value:"License",id:"license",level:2}];function h(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.header,{children:(0,l.jsx)(i.h1,{id:"osbuild",children:"OSBuild"})}),"\n",(0,l.jsx)(i.p,{children:"Build-Pipelines for Operating System Artifacts"}),"\n",(0,l.jsx)(i.p,{children:"OSBuild is a pipeline-based build system for operating system artifacts. It\ndefines a universal pipeline description and a build system to execute them,\nproducing artifacts like operating system images, working towards an image\nbuild pipeline that is more comprehensible, reproducible, and extendable."}),"\n",(0,l.jsxs)(i.p,{children:["See the ",(0,l.jsx)(i.code,{children:"osbuild(1)"})," man-page for details on how to run osbuild, the definition\nof the pipeline description, and more."]}),"\n",(0,l.jsx)(i.h2,{id:"project",children:"Project"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Website"}),": ",(0,l.jsx)(i.a,{href:"https://www.osbuild.org",children:"https://www.osbuild.org"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Bug Tracker"}),": ",(0,l.jsx)(i.a,{href:"https://github.com/osbuild/osbuild/issues",children:"https://github.com/osbuild/osbuild/issues"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Discussions"}),": ",(0,l.jsx)(i.a,{href:"https://github.com/orgs/osbuild/discussions",children:"https://github.com/orgs/osbuild/discussions"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Matrix"}),": #image-builder on ",(0,l.jsx)(i.a,{href:"https://matrix.to/#/#image-builder:fedoraproject.org",children:"fedoraproject.org"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Changelog"}),": ",(0,l.jsx)(i.a,{href:"https://github.com/osbuild/osbuild/releases",children:"https://github.com/osbuild/osbuild/releases"})]}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"principles",children:"Principles"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.a,{href:"https://github.com/osbuild/osbuild/tree/main/stages",children:"OSBuild stages"})," are never broken, only deprecated. The same manifest should always produce the same output."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.a,{href:"https://github.com/osbuild/osbuild/tree/main/stages",children:"OSBuild stages"})," should be explicit whenever possible instead of e.g. relying on the state of the tree."]}),"\n",(0,l.jsx)(i.li,{children:"Pipelines are independent, so the tree is expected to be empty at the beginning of each."}),"\n",(0,l.jsx)(i.li,{children:"Manifests are expected to be machine-generated, so OSBuild has no convenience functions to support manually created manifests."}),"\n",(0,l.jsx)(i.li,{children:"The build environment is confined against accidental misuse, but this should not be considered a security boundary."}),"\n",(0,l.jsx)(i.li,{children:"OSBuild may only use Python language features supported by the oldest target distribution."}),"\n"]}),"\n",(0,l.jsx)(i.h3,{id:"contributing",children:"Contributing"}),"\n",(0,l.jsxs)(i.p,{children:["Please refer to the ",(0,l.jsx)(i.a,{href:"https://osbuild.org/docs/developer-guide/index",children:"developer guide"})," to learn about our workflow, code style and more."]}),"\n",(0,l.jsx)(i.h2,{id:"requirements",children:"Requirements"}),"\n",(0,l.jsx)(i.p,{children:"The requirements for this project are:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"bubblewrap >= 0.4.0"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"python >= 3.6"})}),"\n"]}),"\n",(0,l.jsx)(i.p,{children:"Additionally, the built-in stages require:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"bash >= 5.0"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"coreutils >= 8.31"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"curl >= 7.68"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"qemu-img >= 4.2.0"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"rpm >= 4.15"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"tar >= 1.32"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"util-linux >= 235"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"skopeo"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"python3-librepo"})}),"\n"]}),"\n",(0,l.jsx)(i.p,{children:"At build-time, the following software is required:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"python-docutils >= 0.13"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"pkg-config >= 0.29"})}),"\n"]}),"\n",(0,l.jsx)(i.p,{children:"Testing requires additional software:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.code,{children:"pytest"})}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"build",children:"Build"}),"\n",(0,l.jsx)(i.p,{children:"Osbuild is a python script so it is not compiled.\nTo verify changes made to the code use included makefile rules:"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"make lint"})," to run linter on top of the code"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"make test-all"})," to run base set of tests"]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.code,{children:"sudo make test-run"})," to run extended set of tests (takes long time)"]}),"\n"]}),"\n",(0,l.jsx)(i.p,{children:"Also keep in mind that some tests require those prerequisites,\notherwise they are skipped"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{children:"sudo dnf install -y systemd-boot-unsigned erofs-utils pykickstart podman xfsprogs\n"})}),"\n",(0,l.jsx)(i.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsxs)(i.p,{children:["Installing ",(0,l.jsx)(i.code,{children:"osbuild"})," requires to not only install the ",(0,l.jsx)(i.code,{children:"osbuild"})," module, but also\nadditional artifacts such as tools (i.e: ",(0,l.jsx)(i.code,{children:"osbuild-mpp"}),") sources, stages, schemas\nand SELinux policies."]}),"\n",(0,l.jsx)(i.p,{children:"For this reason, doing an installation from source is not trivial and the easier\nway to install it is to create the set of RPMs that contain all these components."}),"\n",(0,l.jsxs)(i.p,{children:["This can be done with the ",(0,l.jsx)(i.code,{children:"rpm"})," make target, i.e:"]}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-sh",children:"make rpm\n"})}),"\n",(0,l.jsxs)(i.p,{children:["A set of RPMs will be created in the ",(0,l.jsx)(i.code,{children:"./rpmbuild/RPMS/noarch/"})," directory and can\nbe installed in the system using the distribution package manager, i.e:"]}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-sh",children:"sudo dnf install ./rpmbuild/RPMS/noarch/*.rpm\n"})}),"\n",(0,l.jsx)(i.h2,{id:"repository",children:"Repository"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"web"}),":   ",(0,l.jsx)(i.a,{href:"https://github.com/osbuild/osbuild",children:"https://github.com/osbuild/osbuild"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"https"}),": ",(0,l.jsx)(i.code,{children:"https://github.com/osbuild/osbuild.git"})]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"ssh"}),":   ",(0,l.jsx)(i.code,{children:"git@github.com:osbuild/osbuild.git"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"license",children:"License"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.strong,{children:"Apache-2.0"})}),"\n",(0,l.jsx)(i.li,{children:"See LICENSE file for details."}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>d});var n=s(96540);const l={},t=n.createContext(l);function r(e){const i=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),n.createElement(t.Provider,{value:i},e.children)}}}]);