"use strict";(self.webpackChunksaurus=self.webpackChunksaurus||[]).push([[3019],{57020:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>m,frontMatter:()=>d,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"user-guide/blueprint-reference","title":"Blueprint Reference","description":"Blueprints are text files in the TOML format that describe customizations for the image you are building.","source":"@site/docs/user-guide/01-blueprint-reference.md","sourceDirName":"user-guide","slug":"/user-guide/blueprint-reference","permalink":"/docs/user-guide/blueprint-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/osbuild/osbuild.github.io/tree/main/docs/user-guide/01-blueprint-reference.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"userguide","previous":{"title":"Introduction","permalink":"/docs/user-guide/introduction"},"next":{"title":"Third-party Repositories","permalink":"/docs/user-guide/repository-customizations"}}');var t=s(74848),o=s(28453),r=s(49489),l=s(24594),a=s(78955);const d={},c="Blueprint Reference",h={},u=[{value:"Distribution selection with blueprints \ud83d\udd35\xa0\ud83d\udfe4",id:"distribution-selection-with-blueprints",level:3},{value:"Content",id:"content",level:2},{value:"Packages \ud83d\udd35\xa0\ud83d\udfe4",id:"packages",level:3},{value:"Groups \ud83d\udd35\xa0\ud83d\udfe4",id:"groups",level:3},{value:"Containers \ud83d\udd35 \ud83d\udfe4",id:"containers",level:3},{value:"Customizations",id:"customizations",level:2},{value:"Hostname \ud83d\udd35 \ud83d\udfe4",id:"hostname",level:3},{value:"Kernel \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"kernel",level:3},{value:"Kernel Command-Line Arguments",id:"kernel-command-line-arguments",level:4},{value:"Subscription-manager (RHSM) \ud83d\udd35",id:"rhsm",level:3},{value:"RPM configuration \ud83d\udd35",id:"rpm",level:3},{value:"SSH Keys \ud83d\udd35 \ud83d\udfe4",id:"ssh-keys",level:3},{value:"Users \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"additional-users",level:3},{value:"Additional groups \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"additional-groups",level:3},{value:"Timezone \ud83d\udd35 \ud83d\udfe4",id:"timezone",level:3},{value:"Locale \ud83d\udd35 \ud83d\udfe4",id:"locale",level:3},{value:"Firewall \ud83d\udd35 \ud83d\udfe4",id:"firewall",level:3},{value:"Systemd Services \ud83d\udd35 \ud83d\udfe4",id:"systemd-services",level:3},{value:"Files and directories \ud83d\udd35 \ud83d\udfe4",id:"files-and-directories",level:3},{value:"Directories",id:"directories",level:4},{value:"Files",id:"files",level:4},{value:"Installation device \ud83d\udd35 \ud83d\udfe4",id:"installation-device",level:3},{value:"Ignition \ud83d\udd35 \ud83d\udfe4",id:"ignition",level:3},{value:"<code>ignition.embedded</code> configuration",id:"ignitionembedded-configuration",level:4},{value:"<code>ignition.firstboot</code> configuration",id:"ignitionfirstboot-configuration",level:4},{value:"FDO \ud83d\udd35 \ud83d\udfe4",id:"fdo",level:3},{value:"Repositories \ud83d\udd35 \ud83d\udfe4",id:"repositories",level:3},{value:"Repository GPG Keys",id:"repository-gpg-keys",level:4},{value:"Partitioning mode \ud83d\udd35 \ud83d\udfe4",id:"partitioning-mode",level:3},{value:"Filesystems \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"filesystems",level:3},{value:"Allowed mountpoints (osbuild-composer version &lt; 94)",id:"allowed-mountpoints-osbuild-composer-version--94",level:4},{value:"Allowed mountpoints (osbuild-composer version &gt;= 94)",id:"allowed-mountpoints-osbuild-composer-version--94-1",level:4},{value:"Disk \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"disk",level:3},{value:"Allowed mountpoints",id:"allowed-mountpoints",level:4},{value:"OpenSCAP \ud83d\udd35 \ud83d\udfe4",id:"openscap",level:3},{value:"OpenSCAP Tailoring \ud83d\udd35",id:"openscap-tailoring",level:4},{value:"OpenSCAP JSON Tailoring \ud83d\udd35",id:"openscap-json-tailoring",level:3},{value:"FIPS \ud83d\udd35 \ud83d\udfe4",id:"fips",level:3},{value:"Architecture \ud83d\udfe4",id:"architecture",level:3},{value:"Installer \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"installer",level:3},{value:"Installer Kickstart \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3",id:"installer-kickstart",level:4},{value:"Anaconda Modules \ud83d\udfe3",id:"anaconda-modules",level:4},{value:"Enable vs Disable priority",id:"enable-vs-disable-priority",level:5},{value:"Example Blueprints",id:"example-blueprints",level:2},{value:"Multiple customizations",id:"multiple-customizations",level:3},{value:"Enable system FIPS mode in Edge Simplified installer",id:"enable-system-fips-mode-in-edge-simplified-installer",level:3}];function p(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"blueprint-reference",children:"Blueprint Reference"})}),"\n",(0,t.jsxs)(n.p,{children:["Blueprints are text files in the ",(0,t.jsx)(n.a,{href:"https://toml.io/en/",children:"TOML format"})," that describe customizations for the image you are building.\nTo be used in the ",(0,t.jsx)(a.Ay,{colorVar:"on-premises",children:"\ud83d\udd35\xa0on\xa0premises"})," environment."]}),"\n",(0,t.jsxs)(n.p,{children:["Analogously the request content of the\n",(0,t.jsxs)(n.a,{href:"https://developers.redhat.com/api-catalog/api/image-builder#operation-post-/compose",children:["image-builder ",(0,t.jsx)(n.code,{children:"/compose"})," request"]}),"\ndescribes customizations of an image the ",(0,t.jsx)(a.Ay,{colorVar:"hosted",children:"\ud83d\udfe4\xa0hosted"})," service should be building.\nNot all customizations are supported in the API but those existing, are highlighted here with a\n",(0,t.jsx)(a.Ay,{colorVar:"hosted",children:"\ud83d\udfe4\xa0hosted"})," label."]}),"\n",(0,t.jsxs)(n.p,{children:["Additionally, there is ",(0,t.jsx)(a.Ay,{colorVar:"bootc",children:"\ud83d\udfe3\xa0bootc"})," which is supposed to be used from within podman desktop."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["An important thing to note is that these customizations are not applicable to all image types. ",(0,t.jsx)(n.code,{children:"osbuild-composer"})," currently has no good validation or warning system in place to tell you if a customization in your blueprint is not supported for the image type you're building. The customization may be silently dropped."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"A very basic blueprint with just the required attributes at the root looks like:"}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'name = "basic-example"\ndescription = "A basic blueprint"\nversion = "0.0.1"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "image_name": "basic-example",\n  "image_description": "A basic blueprint"\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"Where:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"name"})," attribute is a string that contains the name of the blueprint. It can contain spaces, but they will be converted to ",(0,t.jsx)(n.code,{children:"-"})," when it is imported into ",(0,t.jsx)(n.code,{children:"osbuild-composer"}),". It should be short and descriptive."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"description"})," attribute is a string that can be a longer description of the blueprint and is only used for display purposes."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"version"})," attribute is a string that contains a semantic versioning compatible version number. If a new blueprint is uploaded with the same version the server will automatically bump the PATCH level of the version. If the version doesn't match it will be used as is. For example, uploading a blueprint with version set to 0.1.0 when the existing blueprint version is 0.0.1 will result in the new blueprint being stored as version 0.1.0."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You can upload a blueprint with the ",(0,t.jsx)(n.code,{children:"osbuild-composer blueprints push $filename"})," command, the blueprint will then be usable in ",(0,t.jsx)(n.code,{children:"osbuild-composer compose"})," as the ",(0,t.jsx)(n.code,{children:"name"})," you gave it."]}),"\n",(0,t.jsxs)(n.p,{children:["Blueprints have two main sections, the ",(0,t.jsx)(n.a,{href:"#content",children:"content"})," and ",(0,t.jsx)(n.a,{href:"#customizations",children:"customizations"})," sections."]}),"\n",(0,t.jsx)(n.h3,{id:"distribution-selection-with-blueprints",children:"Distribution selection with blueprints \ud83d\udd35\xa0\ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The blueprint now supports a new ",(0,t.jsx)(n.code,{children:"distro"})," field that will be used to select the\ndistribution to use when composing images, or depsolving the blueprint. If\n",(0,t.jsx)(n.code,{children:"distro"})," is left blank it will use the host distribution. If you upgrade the\nhost operating system the blueprints with no ",(0,t.jsx)(n.code,{children:"distro"})," set will build using the\nnew os. You can't build an OS image that differs from the host OS that Image Builder lives on."]}),"\n",(0,t.jsx)(n.p,{children:"eg. A blueprint that will always build a Fedora 38 image, no matter what\nversion is running on the host:"}),"\n",(0,t.jsxs)(n.p,{children:["Note that ",(0,t.jsx)(n.strong,{children:"osbuild-composer prior to version 100"})," didn't use a dot ",(0,t.jsx)(n.code,{children:"."})," to separate major and minor release versions in the distro name. New versions are backward compatible, so they will still accept the old distro names of distributions supported up to the version 100. However, going forward, it is strongly advised to use the new naming scheme. Future distribution versions won't be backward compatible (e.g. ",(0,t.jsx)(n.code,{children:"rhel-100"})," won't work in the future for RHEL 10.0, but one will have to use ",(0,t.jsx)(n.code,{children:"rhel-10.0"}),")."]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsxs)(l.A,{value:"on-premises",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'name = "tmux"\ndescription = "tmux image with openssh"\nversion = "1.2.16"\ndistro = "fedora-38"\n\n[[packages]]\nname = "tmux"\nversion = "*"\n\n[[packages]]\nname = "openssh-server"\nversion = "*"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'name = "tmux"\ndescription = "tmux image with openssh"\nversion = "1.2.16"\n# for osbuild-composer version < 100\n# distro = "rhel-84"\ndistro = "rhel-8.4"\n\n[[packages]]\nname = "tmux"\nversion = "*"\n\n[[packages]]\nname = "openssh-server"\nversion = "*"\n'})})]}),(0,t.jsxs)(l.A,{value:"hosted",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "image_name": "tmux",\n  "image_description": "tmux image with openssh",\n  "distribution": "fedora-38",\n  "customizations": {\n    "packages": ["tmux", "openssh-server"]\n  }\n}\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "image_name": "tmux",\n  "image_description": "tmux image with openssh",\n  "distribution": "rhel-8.4",\n  "customizations": {\n    "packages": ["tmux", "openssh-server"]\n  }\n}\n'})})]}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h2,{id:"content",children:"Content"}),"\n",(0,t.jsx)(n.p,{children:"The content section determines what goes into the image from other sources such as packages, package groups, or containers. Content is defined at the root of the blueprint."}),"\n",(0,t.jsx)(n.h3,{id:"packages",children:"Packages \ud83d\udd35\xa0\ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"packages"})," and ",(0,t.jsx)(n.code,{children:"modules"})," lists contain objects with a ",(0,t.jsx)(n.code,{children:"name"})," and optional ",(0,t.jsx)(n.code,{children:"version"})," attribute."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"name"})," attribute is a ",(0,t.jsx)(n.strong,{children:"required"})," string and can be an exact match, or a filesystem-like glob using ",(0,t.jsx)(n.code,{children:"*"})," for wildcards and ",(0,t.jsx)(n.code,{children:"?"})," for character matching."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"version"})," attribute is an ",(0,t.jsx)(n.em,{children:"optional"})," string can be an exact match or a filesystem-like glob of the version using ",(0,t.jsx)(n.code,{children:"*"})," for wildcards and ",(0,t.jsx)(n.code,{children:"?"})," for character matching. If not provided the latest version in the repositories is used."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Currently there are no differences between packages and modules in ",(0,t.jsx)(n.code,{children:"osbuild-composer"}),". Both are treated like an rpm package dependency."]})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["When using virtual ",(0,t.jsx)(n.code,{children:"provides"})," as the package name the version glob should be ",(0,t.jsx)(n.code,{children:"*"}),". And be aware that you will be unable to ",(0,t.jsx)(n.code,{children:"freeze"})," the blueprint. This is because the ",(0,t.jsx)(n.code,{children:"provides"})," will expand into multiple packages with their own names and versions."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For example, to install ",(0,t.jsx)(n.code,{children:"tmux-2.9a"})," and ",(0,t.jsx)(n.code,{children:"openssh-server-8.*"})," packages, add this to your blueprint:"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsxs)(l.A,{value:"on-premises",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[packages]]\nname = "tmux"\nversion = "2.9a"\n\n[[packages]]\nname = "openssh-server"\nversion = "8.*"\n'})}),(0,t.jsxs)(n.p,{children:["Or in alternative syntax",(0,t.jsx)(n.sup,{children:(0,t.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'packages = [\n    { name = "tmux", version = "2.9a" },\n    { name = "openssh-server", version = "8.*" }\n]\n'})})]}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "packages": ["tmux", "openssh-server"]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"groups",children:"Groups \ud83d\udd35\xa0\ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"groups"})," list contains objects with a ",(0,t.jsx)(n.code,{children:"name"}),"-attribute."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"name"})," attribute is a ",(0,t.jsx)(n.strong,{children:"required"})," string and must match the id of a package group in the repositories exactly."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"groups"})," describes groups of packages to be installed into the image. Package groups are defined in the repository metadata. Each group has a descriptive name used primarily for display in user interfaces and an ID more commonly used in kickstart files. Here, the ID is the expected way of listing a group. Groups have three different ways of categorizing their packages: mandatory, default, and optional. For the purposes of blueprints, only mandatory and default packages will be installed. There is no mechanism for selecting optional packages."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, if you want to install the ",(0,t.jsx)(n.code,{children:"anaconda-tools"})," group, add the following to your blueprint:"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsxs)(l.A,{value:"on-premises",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[groups]]\nname = "anaconda-tools"\n'})}),(0,t.jsxs)(n.p,{children:["Or in alternative syntax",(0,t.jsx)(n.sup,{children:(0,t.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'groups = [\n    { name = "anaconda-tools" }\n]\n'})})]}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "packages": ["@anaconda-tools"],\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"containers",children:"Containers \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"containers"})," list contains objects with a ",(0,t.jsx)(n.code,{children:"source"})," and optional ",(0,t.jsx)(n.code,{children:"tls-verify"})," attribute."]}),"\n",(0,t.jsx)(n.p,{children:"These list entries describe the container images to be embedded into the image."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"source"})," attribute is a ",(0,t.jsx)(n.strong,{children:"required"})," string and is a reference to a container image at a registry."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"name"})," attribute is an ",(0,t.jsx)(n.em,{children:"optional"})," string to set the name under which the container image will be saved in the image. If not specified ",(0,t.jsx)(n.code,{children:"name"})," falls back to the same value as ",(0,t.jsx)(n.code,{children:"source"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"tls-verify"})," attribute is an ",(0,t.jsx)(n.em,{children:"optional"})," boolean to disable TLS verification of the source download. By default this is set to ",(0,t.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"local-storage"})," attribute is an ",(0,t.jsx)(n.em,{children:"optional"})," boolean to pull the container image from the host's local-storage. By default this is set to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The container is pulled during the image build and stored in the image at the default local container storage location that is appropriate for the image type, so that all supported container tools like ",(0,t.jsx)(n.code,{children:"podman"})," and ",(0,t.jsx)(n.code,{children:"cri-o"})," will be able to work with it."]}),"\n",(0,t.jsx)(n.p,{children:"The embedded containers are not started, to do so you can create systemd unit files or quadlets with the files customization."}),"\n",(0,t.jsx)(n.p,{children:"Container images from local-storage are only supported on-premise."}),"\n",(0,t.jsxs)(n.p,{children:["To embed the latest fedora container from ",(0,t.jsx)(n.a,{href:"http://quay.io",children:"http://quay.io"})," and a container from your host, add this to your blueprint:"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsxs)(l.A,{value:"on-premises",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[containers]]\nsource = "quay.io/fedora/fedora:latest"\n\n[[containers]]\nsource = "localhost/test:latest"\nlocal-storage = true\n'})}),(0,t.jsxs)(n.p,{children:["Or in alternative syntax",(0,t.jsx)(n.sup,{children:(0,t.jsx)(n.a,{href:"#user-content-fn-1",id:"user-content-fnref-1-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'containers = [\n    { source = "quay.io/fedora/fedora:latest" },\n    { source = "quay.io/fedora/fedora-minimal:latest", tls-verify = false, name = "fedora-m" },\n    { source = "localhost/test:latest", local-storage = true },\n]\n'})})]}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "containers": [\n      { "source": "quay.io/fedora/fedora:latest" },\n      { "source": "quay.io/fedora/fedora-minimal:latest",\n        "tls_verify": false,\n        "name": "fedora-m"\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["To access protected container resources a ",(0,t.jsx)(n.code,{children:"containers-auth.json(5)"})," file can be used, see ",(0,t.jsx)(n.a,{href:"/docs/on-premises/installation/container-auth",children:"Container registry credentials"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"customizations",children:"Customizations"}),"\n",(0,t.jsxs)(n.p,{children:["In the customizations we determine what goes into the image that's not in the default packages defined under ",(0,t.jsx)(n.a,{href:"#content",children:"Content"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"hostname",children:"Hostname \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"customizations.hostname"})," is an ",(0,t.jsx)(n.em,{children:"optional"})," string that can be used to configure the hostname of the final image:"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations]\nhostname = "baseimage"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "hostname": "baseimage"\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"This is optional and can be left out to use the default hostname."}),"\n",(0,t.jsx)(n.h3,{id:"kernel",children:"Kernel \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsx)(n.h4,{id:"kernel-command-line-arguments",children:"Kernel Command-Line Arguments"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," object that contains the following attributes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string which kernel to use"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"append"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string to append arguments to the bootloader kernel command line"]}),"\n"]}),"\n",(0,t.jsxs)(r.A,{values:a.dS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.kernel]\nname = "kernel-debug"\nappend = "nosmt=force"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "kernel": {\n      "name": "kernel-debug",\n      "append": "nosmt=force"\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.kernel]\n# name - not yet supported\nappend = "nosmt=force"\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"rhsm",children:"Subscription-manager (RHSM) \ud83d\udd35"}),"\n",(0,t.jsx)(n.p,{children:"An optional set of configuration options for the Red Hat Subscription Manager (RHSM) client."}),"\n",(0,t.jsxs)(n.p,{children:["The customization expects that ",(0,t.jsx)(n.code,{children:"subscription-manager"})," package is installed in the image, which is by default part of the RHEL distribution bootable images. To explicitly install the package, add it to the ",(0,t.jsx)(n.a,{href:"#packages",children:"packages section in the blueprint"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The customization is not supported on Fedora distribution images."}),"\n",(0,t.jsx)(n.p,{children:"To configure RHSM in the final image:"}),"\n",(0,t.jsxs)(r.A,{values:a.A9,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"[customizations.rhsm.config.dnf_plugins.product_id]\nenabled = true\n\n[customizations.rhsm.config.dnf_plugins.subscription_manager]\nenabled = true\n\n[customizations.rhsm.config.subscription_manager.rhsm]\nmanage_repos = true\nauto_enable_yum_plugins = false\n\n[customizations.rhsm.config.subscription_manager.rhsmcertd]\nauto_registration = true\n"})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"rpm",children:"RPM configuration \ud83d\udd35"}),"\n",(0,t.jsx)(n.p,{children:"An optional set of RPM configuration options. Currently, only importing RPM GPG keys from a file in the image is supported."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"files"})," is a list of strings containing the paths to the GPG keys to import. The files must be present in the image."]}),"\n",(0,t.jsx)(n.p,{children:"To configure RPM in the final image:"}),"\n",(0,t.jsxs)(r.A,{values:a.A9,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.rpm.import_keys]\nfiles = [\n  "/etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-18-primary",\n  "/etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-19-primary"\n]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"ssh-keys",children:"SSH Keys \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," list of objects containing:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"user"})," attribute is a ",(0,t.jsx)(n.strong,{children:"required"})," string and must match the name of a user in the image exactly."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"key"})," attribute is a ",(0,t.jsx)(n.strong,{children:"required"})," string that contains the public key to be set for that user."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Deprecated: you should prefer the ",(0,t.jsx)(n.a,{href:"#additional-users",children:"users"})," customization which allows you to add SSH keys to users. Not all frontends support this customization."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Warning: ",(0,t.jsx)(n.code,{children:"key"})," expects the entire content of the public key file, traditionally ",(0,t.jsx)(n.code,{children:"~/.ssh/id_rsa.pub"})," but any algorithm supported by the operating system in the image is valid"]})}),"\n",(0,t.jsx)(n.p,{children:"Set an existing user's SSH key in the final image:"}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.sshkey]]\nuser = "root"\nkey = "PUBLIC SSH KEY"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "users": [\n      { "name": "root",\n        "ssh_key": "PUBLIC SSH KEY"\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["The key will be added to the user's ",(0,t.jsx)(n.code,{children:"authorized_keys"})," file in their home directory."]}),"\n",(0,t.jsx)(n.h3,{id:"additional-users",children:"Users \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," list of objects that contain the following attributes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," a ",(0,t.jsx)(n.strong,{children:"required"})," string that sets the username."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"description"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"password"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"home"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"shell"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"groups"})," an ",(0,t.jsx)(n.em,{children:"optional"})," list of strings."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"uid"})," an ",(0,t.jsx)(n.em,{children:"optional"})," integer."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gid"})," an ",(0,t.jsx)(n.em,{children:"optional"})," integer."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"expiredate"})," an ",(0,t.jsx)(n.em,{children:"optional"})," integer."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Warning: ",(0,t.jsx)(n.code,{children:"key"})," expects the entire content of the public key file, traditionally ",(0,t.jsx)(n.code,{children:"~/.ssh/id_rsa.pub"})," but any algorithm supported by the operating system in the image is valid"]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Note: If the password starts with $6$, $5$, or $2b$ it will be stored as an encrypted password. Otherwise it will be treated as a plain text password."})}),"\n",(0,t.jsxs)(n.p,{children:["To generate an encrypted password you might want to use ",(0,t.jsx)(n.code,{children:"openssl"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"openssl passwd -6\n"})}),"\n",(0,t.jsxs)(n.p,{children:["or ",(0,t.jsx)(n.code,{children:"mkpasswd"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"mkpasswd -m sha-512\n"})}),"\n",(0,t.jsx)(n.p,{children:"Adds a user to or modifies a user in the image, and/or set their ssh key. All fields for this section are optional except for the name. The following is a complete example:"}),"\n",(0,t.jsxs)(r.A,{values:a.dS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.user]]\nname = "admin"\ndescription = "Administrator account"\npassword = "$6$CHO2$3rN8eviE2t50lmVyBYihTgVRHcaecmeCk31L..."\nkey = "PUBLIC SSH KEY"\nhome = "/srv/widget/"\nshell = "/usr/bin/bash"\ngroups = ["widget", "users", "wheel"]\nuid = 1200\ngid = 1200\nexpiredate = 12345\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "users": [\n      { "name": "admin",\n        "ssh_key": "PUBLIC SSH KEY"\n      }\n    ],\n    "groups": [\n      { "name": "admin",\n        "gid": 1200\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.user]]\nname = "alice"\npassword = "bob"\nkey = "ssh-rsa AAA ... user@email.com"\ngroups = ["wheel"]\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"additional-groups",children:"Additional groups \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," list of objects that contain the following attributes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," a ",(0,t.jsx)(n.strong,{children:"required"})," string that sets the name of the group."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gid"})," a ",(0,t.jsx)(n.strong,{children:"required"})," integer that sets the id of the group."]}),"\n"]}),"\n",(0,t.jsxs)(r.A,{values:a.dS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.group]]\nname = "widget"\ngid = 1130\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "groups": [\n      { "name": "widget",\n        "gid": 1130\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.group]]\nname = "widget"\ngid = 1130\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"timezone",children:"Timezone \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," object that contains the following attributes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"timezone"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string. If not provided the UTC timezone is used.."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ntpservers"})," an ",(0,t.jsx)(n.em,{children:"optional"})," list of strings containing NTP servers to use. If not provided the distribution defaults are used."]}),"\n"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.timezone]\ntimezone = "US/Eastern"\nntpservers = ["0.north-america.pool.ntp.org", "1.north-america.pool.ntp.org"]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "timezone": {\n      "timezone": "US/Eastern",\n      "ntpservers": [\n        "0.north-america.pool.ntp.org",\n        "1.north-america.pool.ntp.org"\n      ]\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"The values supported by timezone can be listed by running the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ timedatectl list-timezones\n"})}),"\n",(0,t.jsx)(n.p,{children:"Some image types have already NTP servers setup such as Google Cloud images. These cannot be overridden because they are required to boot in the selected environment. However, the timezone will be updated to the one selected in the blueprint."}),"\n",(0,t.jsx)(n.h3,{id:"locale",children:"Locale \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," object that contains the following attributes to customize the locale settings for the system:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"languages"})," an ",(0,t.jsx)(n.em,{children:"optional"})," list of strings containing locales to be installed."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"keyboard"})," an ",(0,t.jsx)(n.em,{children:"optional"})," string to set the keyboard layout."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Multiple languages can be added. The first one becomes the primary, and the others are added as secondary. You must include one or more languages or keyboards in the section."}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.locale]\nlanguages = ["en_US.UTF-8"]\nkeyboard = "us"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "locale": {\n      "languages": ["en_US.UTF-8"],\n      "keyboard": "us"\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.p,{children:"The values supported by languages can be listed by running can be listed by running the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ localectl list-locales\n"})}),"\n",(0,t.jsx)(n.p,{children:"The values supported by keyboard can be listed by running the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ localectl list-keymaps\n"})}),"\n",(0,t.jsx)(n.h3,{id:"firewall",children:"Firewall \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," object containing the following attributes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ports"})," an ",(0,t.jsx)(n.em,{children:"optional"})," list of strings containing ports (or port ranges) and protocols to open."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"services"})," an ",(0,t.jsx)(n.em,{children:"optional"})," object with the following attributes containing services to enable or disable for ",(0,t.jsx)(n.code,{children:"firewalld"}),".","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"enabled"})," ",(0,t.jsx)(n.em,{children:"optional"})," list of strings for services to enable."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"disabled"})," ",(0,t.jsx)(n.em,{children:"optional"})," list of strings for services to disable."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"By default the firewall blocks all access, except for services that enable their ports explicitly such as the sshd. The following blueprint can be used to open other ports or services."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Note: Ports are configured using the ",(0,t.jsx)(n.code,{children:"port:protocol"})," format; port ranges are configured using ",(0,t.jsx)(n.code,{children:"portA-portB:protocol"})," format:"]})}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.firewall]\nports = ["22:tcp", "80:tcp", "imap:tcp", "53:tcp", "53:udp", "30000-32767:tcp", "30000-32767:udp"]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "firewall": {\n      "ports": ["22:tcp", "80:tcp", "imap:tcp", "53:tcp", "53:udp", "30000-32767:tcp", "30000-32767:udp"]\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Numeric ports, or their names from ",(0,t.jsx)(n.code,{children:"/etc/services"})," can be used in the ports enabled/disabled lists."]}),"\n",(0,t.jsx)(n.p,{children:"The blueprint settings extend any existing settings in the image templates. Thus, if sshd is already enabled, it will extend the list of ports with those already listed by the blueprint."}),"\n",(0,t.jsxs)(n.p,{children:["If the distribution uses ",(0,t.jsx)(n.code,{children:"firewalld"})," you can specify services listed by ",(0,t.jsx)(n.code,{children:"firewall-cmd --get-services"})," in a ",(0,t.jsx)(n.code,{children:"customizations.firewall.services"})," section:"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.firewall.services]\nenabled = ["ftp", "ntp", "dhcp"]\ndisabled = ["telnet"]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "firewall": {\n      "services": {\n        "enabled": ["ftp", "ntp", "dhcp"],\n        "disabled": ["telnet"]\n      }\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Remember that the ",(0,t.jsx)(n.code,{children:"firewall.services"})," are different from the names in ",(0,t.jsx)(n.code,{children:"/etc/services"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Both are optional, if they are not used leave them out or set them to an empty list ",(0,t.jsx)(n.code,{children:"[]"}),". If you only want the default firewall setup this section can be omitted from the blueprint."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Note: The Google and OpenStack templates explicitly disable the firewall for their environment. This cannot be overridden by the blueprint."})}),"\n",(0,t.jsx)(n.h3,{id:"systemd-services",children:"Systemd Services \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.em,{children:"optional"})," object containing the following attributes:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"enabled"})," an ",(0,t.jsx)(n.em,{children:"optional"})," list of strings containing services to be enabled."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"disabled"})," an ",(0,t.jsx)(n.em,{children:"optional"})," list of strings containing services to be disabled."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"masked"})," ",(0,t.jsx)(n.em,{children:"optional"})," list of strings for services to mask."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"If a service enabled or disabled through the corresponding attributes does not exist in the image that is being built then this customization will fail and the build will fail as a result.\nHowever, the corresponding package is not required on the image when masking a service."}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.services]\nenabled = ["sshd", "cockpit.socket", "httpd"]\ndisabled = ["postfix", "telnetd"]\nmasked = ["rpcbind"]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "services":{\n      "enabled": ["sshd", "cockpit.socket", "httpd"],\n      "disabled": ["postfix", "telnetd"],\n      "masked": ["rpcbind"],\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["This section can be used to control which services are enabled at boot time. Some image types already have services enabled or disabled in order for the image to work correctly, and cannot be overridden. For example, ",(0,t.jsx)(n.code,{children:"ami"})," image type requires ",(0,t.jsx)(n.code,{children:"sshd"}),", ",(0,t.jsx)(n.code,{children:"chronyd"}),", and ",(0,t.jsx)(n.code,{children:"cloud-init"})," services. Without them, the image will not boot. Blueprint services do not replace these services, but add them to the list of services already present in the templates, if any."]}),"\n",(0,t.jsx)(n.p,{children:"The service names are systemd service units. You may specify any systemd unit file accepted by systemctl enable, for example, cockpit.socket:"}),"\n",(0,t.jsx)(n.h3,{id:"files-and-directories",children:"Files and directories \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsx)(n.p,{children:"You can use blueprint customizations to create custom files and directories in the image. When using the custom files and directories customization, the following rules apply:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The path must be an absolute path and must be under ",(0,t.jsx)(n.code,{children:"/etc"}),", ",(0,t.jsx)(n.code,{children:"/root"}),", ",(0,t.jsx)(n.code,{children:"/usr/local/bin"})," or ",(0,t.jsx)(n.code,{children:"/usr/local/sbin"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"There must be no duplicate paths of the same directory."}),"\n",(0,t.jsx)(n.li,{children:"There must be no duplicate paths of the same file."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["These customizations are not supported for image types that deploy ostree commits (such as ",(0,t.jsx)(n.code,{children:"edge-raw-image"}),", ",(0,t.jsx)(n.code,{children:"edge-installer"}),", ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"}),"). The only exception is the Fedora ",(0,t.jsx)(n.code,{children:"iot-raw-image"})," image type, which supports these customizations."]}),"\n",(0,t.jsx)(n.h4,{id:"directories",children:"Directories"}),"\n",(0,t.jsxs)(n.p,{children:["You can create custom directories by specifying items in the ",(0,t.jsx)(n.code,{children:"customizations.directories"})," list. The existence of a specified directory is handled gracefully only if no explicit ",(0,t.jsx)(n.code,{children:"mode"}),", ",(0,t.jsx)(n.code,{children:"user"})," or ",(0,t.jsx)(n.code,{children:"group"})," is specified. If any of these customizations are specified and the directory already exists in the image, the image build will fail. The intention is to prevent changing the ownership or permissions of existing directories."]}),"\n",(0,t.jsxs)(n.p,{children:["The following example creates a directory ",(0,t.jsx)(n.code,{children:"/etc/foobar"})," with all the default settings:"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.directories]]\npath = "/etc/foobar"\nmode = "0755"\nuser = "root"\ngroup = "root"\nensure_parents = false\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "directories": [\n      { "path": "/etc/foobar",\n        "mode": "0755",\n        "user": "root",\n        "group": "root",\n        "ensure_parents": false\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"path"})," is the path to the directory to create. It must be an absolute path under ",(0,t.jsx)(n.code,{children:"/etc"}),". This is the only required field."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"mode"})," is the octal mode to set on the directory. If not specified, the default is ",(0,t.jsx)(n.code,{children:"0755"}),". The leading zero is optional."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"user"})," is the user to set as the owner of the directory. If not specified, the default is ",(0,t.jsx)(n.code,{children:"root"}),". Can be specified as user name (string) or as user id (integer)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"group"})," is the group to set as the owner of the directory. If not specified, the default is ",(0,t.jsx)(n.code,{children:"root"}),". Can be specified as group name (string) or as group id (integer)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ensure_parents"})," is a boolean that specifies whether to create parent directories as needed. If not specified, the default is ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"files",children:"Files"}),"\n",(0,t.jsxs)(n.p,{children:["You can create custom files by specifying items in the ",(0,t.jsx)(n.code,{children:"customizations.files"})," list. You can use the customization to create new files or to replace existing ones, if not restricted by the policy specified below. If the target path is an existing symlink to another file, the symlink will be replaced by the custom file."]}),"\n",(0,t.jsxs)(n.p,{children:["Please note that the parent directory of a specified file must exist. If it does not exist, the image build will fail. One can ensure that the parent directory exists by specifying it in the ",(0,t.jsx)(n.code,{children:"customizations.directories"})," list."]}),"\n",(0,t.jsx)(n.p,{children:"In addition, the following files are not allowed to be created or replaced by policy:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/etc/fstab"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/etc/shadow"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/etc/passwd"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/etc/group"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Using the ",(0,t.jsx)(n.code,{children:"files"})," customization comes with a high chance of creating an image that doesn't boot. ",(0,t.jsx)(n.strong,{children:"Use this feature only if you know what you are doing"}),". Although the ",(0,t.jsx)(n.code,{children:"files"})," customization can be used to configure parts of the OS which can also be configured by other blueprint customizations, this use is discouraged. If possible, users should always default to using the specialized blueprint customizations. Note that if you combine the files customizations with other customizations, the other customizations may not work as expected or may be overridden by the files customizations."]}),"\n",(0,t.jsxs)(n.p,{children:["The following example creates a file ",(0,t.jsx)(n.code,{children:"/etc/foobar"})," with the contents ",(0,t.jsx)(n.code,{children:"Hello world!"}),":"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.files]]\npath = "/etc/foobar"\nmode = "0644"\nuser = "root"\ngroup = "root"\ndata = """\nHello world!\nThis is how you make a multiline string.\n"""\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "files": [\n      { "path": "/etc/foobar",\n        "mode": "0644",\n        "user": "root",\n        "group": "root",\n        "data": "Hello world!\\nThis is how you make a multiline string.\\n"\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"path"})," is the path to the file to create. It must be an absolute under ",(0,t.jsx)(n.code,{children:"/etc"}),". This is the only required field."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"mode"})," is the octal mode to set on the file. If not specified, the default is ",(0,t.jsx)(n.code,{children:"0644"}),". The leading zero is optional."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"user"})," is the user to set as the owner of the file. If not specified, the default is ",(0,t.jsx)(n.code,{children:"root"}),". Can be specified as user name (string) or as user id (integer)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"group"})," is the group to set as the owner of the file. If not specified, the default is ",(0,t.jsx)(n.code,{children:"root"}),". Can be specified as group name (string) or as group id (integer)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data"})," is the plain text contents of the file. If not specified, the default is an empty file."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Note that the ",(0,t.jsx)(n.code,{children:"data"})," property can be specified in any of the ways supported by TOML. Some of them require escaping certain characters and others don't. Please refer to the ",(0,t.jsx)(n.a,{href:"https://toml.io/en/v1.0.0#string",children:"TOML specification"})," for more details."]}),"\n",(0,t.jsx)(n.h3,{id:"installation-device",children:"Installation device \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"customizations.installation_device"})," variable is required by\nthe ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," image. It allows the user to define\nthe destination device for the installation."]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations]\ninstallation_device = "/dev/sda"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "installation_device": "/dev/sda"\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"ignition",children:"Ignition \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"customizations.ignition"})," section allows users to provide ",(0,t.jsx)(n.a,{href:"https://coreos.github.io/ignition/",children:"Ignition"})," configuration files to be used in ",(0,t.jsx)(n.code,{children:"edge-raw-image"})," and ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," images. Check the RHEL for Edge (",(0,t.jsx)(n.code,{children:"r4e"}),") ",(0,t.jsx)(n.a,{href:"https://coreos.github.io/butane/specs/",children:"butane"})," specification for a description of the supported configuration options."]}),"\n",(0,t.jsxs)(n.p,{children:["The blueprint configuration can be done ",(0,t.jsx)(n.em,{children:"either"})," by embedding an Ignition configuration file into the image (only available for ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"}),"), or providing a provisioning URL that will be fetched at first boot."]}),"\n",(0,t.jsxs)(n.h4,{id:"ignitionembedded-configuration",children:[(0,t.jsx)(n.code,{children:"ignition.embedded"})," configuration"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.ignition.embedded]\nconfig = "eyJpZ25pdGlvbiI6eyJ2ZXJzaW9uIjoiMy4zLjAifSwicGFzc3dkIjp7InVzZXJzIjpbeyJncm91cHMiOlsid2hlZWwiXSwibmFtZSI6ImNvcmUiLCJwYXNzd29yZEhhc2giOiIkNiRqZnVObk85dDFCdjdOLjdrJEhxUnhxMmJsdFIzek15QUhqc1N6YmU3dUJIWEVyTzFZdnFwaTZsamNJMDZkUUJrZldYWFpDdUUubUpja2xQVHdhQTlyL3hwSmlFZFdEcXR4bGU3aDgxIn1dfX0="\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "ignition": {\n      "embedded": {\n        "config": "eyJpZ25pdGlvbiI6eyJ2ZXJzaW9uIjoiMy4zLjAifSwicGFzc3dkIjp7InVzZXJzIjpbeyJncm91cHMiOlsid2hlZWwiXSwibmFtZSI6ImNvcmUiLCJwYXNzd29yZEhhc2giOiIkNiRqZnVObk85dDFCdjdOLjdrJEhxUnhxMmJsdFIzek15QUhqc1N6YmU3dUJIWEVyTzFZdnFwaTZsamNJMDZkUUJrZldYWFpDdUUubUpja2xQVHdhQTlyL3hwSmlFZFdEcXR4bGU3aDgxIn1dfX0="\n      }\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Add a ",(0,t.jsx)(n.code,{children:"base64"})," encoded Ignition configuration in the ",(0,t.jsx)(n.code,{children:"config"})," field. This Ignition configuration will be included in the ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," image."]}),"\n",(0,t.jsxs)(n.h4,{id:"ignitionfirstboot-configuration",children:[(0,t.jsx)(n.code,{children:"ignition.firstboot"})," configuration"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.ignition.firstboot]\nurl = "http://some-server/configuration.ig"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "ignition": {\n      "firstboot": {\n        "url": "http://some-server/configuration.ig"\n      }\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Add a URL pointing to the Ignition configuration that will be fetched during the first boot in the ",(0,t.jsx)(n.code,{children:"url"})," field. Available for both ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," and ",(0,t.jsx)(n.code,{children:"edge-raw-image"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"fdo",children:"FDO \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"customizations.fdo"})," section allows users to configure ",(0,t.jsx)(n.a,{href:"https://github.com/fdo-rs/fido-device-onboard-rs",children:"FIDO Device Onboard (FDO)"})," device initialization parameters. It is only available with the ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," or ",(0,t.jsx)(n.code,{children:"iot-simplified-installer"})," image types."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"manufacturing_server_url"})," is a required field."]}),"\n",(0,t.jsxs)(n.p,{children:["The user must choose one of the device initialization methods providing ",(0,t.jsx)(n.code,{children:"diun_pub_key_insecure"}),", ",(0,t.jsx)(n.code,{children:"diun_pub_key_hash"})," or ",(0,t.jsx)(n.code,{children:"diun_pub_key_root_certs"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The user may provide an IFACE name at ",(0,t.jsx)(n.code,{children:"di_mfg_string_type_mac_iface"}),"."]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.fdo]\nmanufacturing_server_url = "http://192.168.122.199:8080"\ndiun_pub_key_insecure = "true"\ndi_mfg_string_type_mac_iface = "enp2s0"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "fdo": {\n      "manufacturing_server_url": "http://192.168.122.199:8080",\n      "diun_pub_key_insecure": "true"\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"repositories",children:"Repositories \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["Third-party repositories are supported by the blueprint customizations. A repository can be defined and enabled in the blueprints which will then be saved to the ",(0,t.jsx)(n.code,{children:"/etc/yum.repos.d"})," directory in an image.\nAn optional ",(0,t.jsx)(n.code,{children:"filename"})," argument can be set, otherwise the repository will be saved using the the repository ID, i.e. ",(0,t.jsx)(n.code,{children:"/etc/yum.repos.d/<repo-id>.repo"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Please note custom repositories ",(0,t.jsx)(n.strong,{children:"cannot be used at build time to install third-party packages"}),". These customizations are used to save and enable third-party repositories on the image. For more information, or if you\nwish to install a package from a third-party repository, please continue reading ",(0,t.jsx)(n.a,{href:"/docs/user-guide/repository-customizations",children:"here"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The following example can be used to create a third-party repository:"}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.repositories]]\nid = "example"\nname="Example repo"\nbaseurls=[ "https://example.com/yum/download" ]\ngpgcheck=true\ngpgkeys = [ "https://example.com/public-key.asc" ]\nenabled=true\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "custom_repositories": [\n      "id": "example",\n      "name": "Example repo",\n      "baseurl": [ "https://example.com/yum/download" ],\n      "check_gpg": true,\n      "gpgkey" : [ "https://example.com/public-key.asc" ],\n      "enabled": true\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Since no filename is specified, the repo will be saved to ",(0,t.jsx)(n.code,{children:"/etc/yum.repos.d/example.repo"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The blueprint accepts the following options:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"})," (required)"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"name"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"filename"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"baseurls"})," (array)"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"mirrorlist"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"metalink"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gpgkeys"})," keys (array)"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"gpgcheck"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"repo_gpgcheck"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"priority"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"ssl_verify"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Note: the ",(0,t.jsx)(n.code,{children:"baseurls"})," and ",(0,t.jsx)(n.code,{children:"gpgkeys"})," fields both accept arrays as input. One of ",(0,t.jsx)(n.code,{children:"baseurls"}),", ",(0,t.jsx)(n.code,{children:"metalink"})," & ",(0,t.jsx)(n.code,{children:"mirrorlist"})," must be provided"]})}),"\n",(0,t.jsx)(n.h4,{id:"repository-gpg-keys",children:"Repository GPG Keys"}),"\n",(0,t.jsxs)(n.p,{children:["The blueprint accepts both inline GPG keys and GPG key urls. If an inline GPG key is provided it will be saved to the ",(0,t.jsx)(n.code,{children:"/etc/pki/rpm-gpg"})," directory and will be referenced accordingly\nin the repository configuration. ",(0,t.jsx)(n.strong,{children:"GPG keys are not imported to the RPM database"})," and will only be imported when first installing a package from the third-party repository."]}),"\n",(0,t.jsx)(n.h3,{id:"partitioning-mode",children:"Partitioning mode \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["See the section of the guide on ",(0,t.jsx)(n.a,{href:"/docs/user-guide/partitioning",children:"Partitioning"})," for more details."]})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"customizations.partitioning_mode"})," variable can be used to select how the\ndisk image will be partitioned. ",(0,t.jsx)(n.code,{children:"auto-lvm"})," will use raw unless there are one or\nmore ",(0,t.jsx)(n.a,{href:"#filesystems",children:"filesystem customizations"})," in which case it will use LVM.\n",(0,t.jsx)(n.code,{children:"lvm"})," always uses LVM, even when there are no extra mountpoints. ",(0,t.jsx)(n.code,{children:"raw"})," uses raw\npartitions even when there are one or more mountpoints."]}),"\n",(0,t.jsx)(n.p,{children:"Supported modes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"auto-lvm"})," uses raw unless ",(0,t.jsx)(n.a,{href:"#filesystems",children:"filesystem customizations"})," are included."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"raw"})," always uses raw partitions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"lvm"})," always uses LVM partitions"]}),"\n"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations]\npartitioning_mode = "lvm"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "partitioning_mode": "lvm"\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"filesystems",children:"Filesystems \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["See the section of the guide on ",(0,t.jsx)(n.a,{href:"/docs/user-guide/partitioning",children:"Partitioning"})," for more details."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["See also the ",(0,t.jsx)(n.a,{href:"#disk",children:"Disk"})," section below for more advanced partitioning control."]})}),"\n",(0,t.jsxs)(n.p,{children:["The blueprints can be extended to provide filesytem support. Currently the ",(0,t.jsx)(n.code,{children:"mountpoint"})," and minimum partition ",(0,t.jsx)(n.code,{children:"minsize"})," can be set. On ",(0,t.jsx)(n.code,{children:"RHEL-8"}),", custom mountpoints are supported only since version ",(0,t.jsx)(n.code,{children:"8.5"}),". For older ",(0,t.jsx)(n.code,{children:"RHEL"})," versions, only the root mountpoint, ",(0,t.jsx)(n.code,{children:"/"}),", is supported, the size argument being an alias for the image size."]}),"\n",(0,t.jsxs)(r.A,{values:a.dS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.filesystem]]\nmountpoint = "/var"\nminsize = 2147483648\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "filesystem": [\n      { "mountpoint": "/var",\n        "min_size": 2147483648\n      }\n    ]\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"# only '/' and '/boot' supported here\n[[customizations.filesystem]]\nmountpoint = \"/boot\"\nminsize = 2147483648\n"})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Filesystem customizations are currently ",(0,t.jsx)(n.strong,{children:"not"})," supported for the following image types:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"image-installer"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-installer"})," (RHEL and CentOS) and ",(0,t.jsx)(n.code,{children:"iot-installer"})," (Fedora)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," (RHEL and CentOS)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In addition, the following image types do not create partitioned OS images and therefore filesystem customizations for these types are meaningless:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-commit"})," (RHEL and CentOS) and ",(0,t.jsx)(n.code,{children:"iot-commit"})," (Fedora)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-container"})," (RHEL and CentOS) and ",(0,t.jsx)(n.code,{children:"iot-container"})," (Fedora)"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tar"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"container"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"allowed-mountpoints-osbuild-composer-version--94",children:"Allowed mountpoints (osbuild-composer version < 94)"}),"\n",(0,t.jsxs)(n.p,{children:["In addition to the root mountpoint, ",(0,t.jsx)(n.code,{children:"/"}),", the following ",(0,t.jsx)(n.code,{children:"mountpoints"})," and their sub-directories are allowed:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/var"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/home"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/opt"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/srv"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/usr"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/app"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/data"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/tmp"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"allowed-mountpoints-osbuild-composer-version--94-1",children:"Allowed mountpoints (osbuild-composer version >= 94)"}),"\n",(0,t.jsx)(n.p,{children:"Arbitrary custom mountpoints are allowed, except for specific paths that are reserved for the OS."}),"\n",(0,t.jsxs)(n.p,{children:["The following mountpoints are ",(0,t.jsx)(n.strong,{children:"not"})," allowed (including their sub-directories):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/bin"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/boot/efi"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/dev"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/etc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/lib"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/lib64"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/lost+found"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/proc"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/run"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/sbin"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/sys"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/sysroot"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/var/lock"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/var/run"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The following mountpoints are allowed, but their sub-directories are ",(0,t.jsx)(n.strong,{children:"not"})," allowed:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"/usr"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"disk",children:"Disk \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["See the section of the guide on ",(0,t.jsx)(n.a,{href:"/docs/user-guide/partitioning",children:"Partitioning"})," for more details."]})}),"\n",(0,t.jsxs)(n.p,{children:["The disk customizations are an alternative to the ",(0,t.jsx)(n.a,{href:"#filesystems",children:"filesystem"})," customizations described above. They provide a more powerful interface to control the whole partitioning layout of the image."]}),"\n",(0,t.jsx)(n.p,{children:"The two customizations are incompatible with each other; you may use one or the other, but not both in the same blueprint."}),"\n",(0,t.jsxs)(n.p,{children:["The examples below are illustrative but not comprehensive. The ",(0,t.jsx)(n.a,{href:"/docs/user-guide/partitioning",children:"Partitioning"})," guide should be consulted to understand all the ways in which this customization can be used."]}),"\n",(0,t.jsxs)(r.A,{values:a.mS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.disk.partitions]]\ntype = "plain"\nlabel = "data"\nmountpoint = "/data"\nfs_type = "ext4"\nminsize = "50 GiB"\n\n[[customizations.disk.partitions]]\ntype = "lvm"\nname = "mainvg"\nminsize = "20 GiB"\n\n[[customizations.disk.partitions.logical_volumes]]\nname = "rootlv"\nmountpoint = "/"\nlabel = "root"\nfs_type = "ext4"\nminsize = "2 GiB"\n\n[[customizations.disk.partitions.logical_volumes]]\nname = "homelv"\nmountpoint = "/home"\nlabel = "home"\nfs_type = "ext4"\nminsize = "2 GiB"\n\n[[customizations.disk.partitions.logical_volumes]]\nname = "swaplv"\nfs_type = "swap"\nminsize = "1 GiB"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[customizations.disk.partitions]]\ntype = "plain"\nlabel = "data"\nmountpoint = "/data"\nfs_type = "ext4"\nminsize = "50 GiB"\n\n[[customizations.disk.partitions]]\ntype = "lvm"\nname = "mainvg"\nminsize = "20 GiB"\n\n[[customizations.disk.partitions.logical_volumes]]\nname = "rootlv"\nmountpoint = "/"\nlabel = "root"\nfs_type = "ext4"\nminsize = "2 GiB"\n\n[[customizations.disk.partitions.logical_volumes]]\nname = "homelv"\nmountpoint = "/home"\nlabel = "home"\nfs_type = "ext4"\nminsize = "2 GiB"\n\n[[customizations.disk.partitions.logical_volumes]]\nname = "swaplv"\nfs_type = "swap"\nminsize = "1 GiB"\n'})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Disk customizations are currently ",(0,t.jsx)(n.strong,{children:"not"})," supported for the following image types:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"image-installer"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-installer"})," (RHEL and CentOS) and ",(0,t.jsx)(n.code,{children:"iot-installer"})," (Fedora)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," (RHEL and CentOS)"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In addition, the following image types do not create partitioned OS images and therefore filesystem customizations for these types are meaningless:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-commit"})," (RHEL and CentOS) and ",(0,t.jsx)(n.code,{children:"iot-commit"})," (Fedora)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"edge-container"})," (RHEL and CentOS) and ",(0,t.jsx)(n.code,{children:"iot-container"})," (Fedora)"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"tar"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"container"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"allowed-mountpoints",children:"Allowed mountpoints"}),"\n",(0,t.jsxs)(n.p,{children:["The same mountpoint restrictions apply as described for ",(0,t.jsx)(n.a,{href:"#filesystems",children:"Filesystems"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"openscap",children:"OpenSCAP \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["From ",(0,t.jsx)(n.code,{children:"RHEL 8.7"})," & ",(0,t.jsx)(n.code,{children:"RHEL 9.1"})," support has been added for ",(0,t.jsx)(n.code,{children:"OpenSCAP"})," build-time remediation. The blueprints accept two fields:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"datastream"})," path to the remediation instructions (optional)"]}),"\n",(0,t.jsxs)(n.li,{children:["the ",(0,t.jsx)(n.code,{children:"profile_id"})," of the desired security profile"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["If the datastream parameter is not provided, ",(0,t.jsx)(n.code,{children:"osbuild-composer"})," will now provide a sensible default based on the selected distro."]}),"\n",(0,t.jsxs)(n.p,{children:["Please see ",(0,t.jsx)(n.a,{href:"/docs/user-guide/oscap-remediation",children:"the OpenSCAP page"})," for the list of available security profiles."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["\u26a0\ufe0f"," ",(0,t.jsx)(n.strong,{children:"Note"}),"\nBuilding OpenSCAP hardened images for ",(0,t.jsx)(n.code,{children:"ostree"})," based images not supported."]}),"\n"]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.openscap]\ndatastream = "/usr/share/xml/scap/ssg/content/ssg-rhel8-ds.xml"\nprofile_id = "xccdf_org.ssgproject.content_profile_cis"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "openscap": {\n      "profile_id": "xccdf_org.ssgproject.content_profile_cis"\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h4,{id:"openscap-tailoring",children:"OpenSCAP Tailoring \ud83d\udd35"}),"\n",(0,t.jsxs)(n.p,{children:["It may be desirable to add or exclude OpenSCAP rules from the remediation scan, this can be achieved by specifying tailoring options\nfor the OpenSCAP customizations. A tailoring file with a new tailoring profile ID is created and saved to the image. The new tailoring\nprofile ID is created by appending the ",(0,t.jsx)(n.code,{children:"_osbuild_tailoring"})," suffix to the base profile. For example, given tailoring options for the ",(0,t.jsx)(n.code,{children:"cis"}),"\nprofile, tailoring profile ",(0,t.jsx)(n.code,{children:"xccdf_org.ssgproject.content_profile_cis_osbuild_tailoring"})," will be created. The default namespace of the rules\nis ",(0,t.jsx)(n.code,{children:"org.ssgproject.content"}),", so the prefix may be omitted for rules under this namespace, i.e. ",(0,t.jsx)(n.code,{children:"org.ssgproject.content_grub2_password"})," and ",(0,t.jsx)(n.code,{children:"grub2_password"}),"\nare functionally equivalent."]}),"\n",(0,t.jsxs)(n.p,{children:["Note: the generated tailoring file is saved to the image as ",(0,t.jsx)(n.code,{children:"/usr/share/xml/osbuild-oscap-tailoring/tailoring.xml"})," or, for newer releases,\nin the ",(0,t.jsx)(n.code,{children:"/oscap_data"})," directory, this is the location used for other OpenSCAP related artifacts."]}),"\n",(0,t.jsxs)(r.A,{values:a.A9,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.openscap]\ndatastream = "/usr/share/xml/scap/ssg/content/ssg-rhel8-ds.xml"\nprofile_id = "xccdf_org.ssgproject.content_profile_cis"\n\n[customizations.openscap.tailoring]\nselected = [ "xccdf_org.ssgproject.content_bind_crypto_policy" ]\nunselected = [ "grub2_password" ]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"openscap-json-tailoring",children:"OpenSCAP JSON Tailoring \ud83d\udd35"}),"\n",(0,t.jsxs)(n.p,{children:["The OpenSCAP team has developed a ",(0,t.jsx)(n.a,{href:"https://github.com/ComplianceAsCode/schemas/blob/b91c8e196a8cc515e0cc7f10b2c5a02b4179c0e5/tailoring/schema.json",children:"json schema"}),"\nas an abstraction to the standard XML tailoring file. This approach helps simplify the process of tailoring an OpenSCAP profile.\nA basic example can be found ",(0,t.jsx)(n.a,{href:"https://github.com/ComplianceAsCode/schemas/blob/b91c8e196a8cc515e0cc7f10b2c5a02b4179c0e5/tailoring/example-basic.json",children:"here"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Both the ",(0,t.jsx)(n.code,{children:"profile_id"})," and the ",(0,t.jsx)(n.code,{children:"filepath"})," options are required and the ",(0,t.jsx)(n.code,{children:"profile_id"})," needs to match the ",(0,t.jsx)(n.code,{children:"profile_id"})," used in the json tailoring file."]}),"\n",(0,t.jsxs)(n.p,{children:["Note: users will need to use ",(0,t.jsx)(n.a,{href:"#files",children:"custom files"})," to save the json tailoring file to the image. The generated XML tailoring file is saved to\nthe image as ",(0,t.jsx)(n.code,{children:"/oscap_data/tailoring.xml"}),"."]}),"\n",(0,t.jsxs)(r.A,{values:a.A9,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.openscap]\ndatastream = "/usr/share/xml/scap/ssg/content/ssg-rhel8-ds.xml"\nprofile_id = "xccdf_org.ssgproject.content_profile_cis"\n\n[customizations.openscap.json_tailoring]\nprofile_id = "name-of-profile-used-in-json-tailoring-file"\nfilepath =  "/some/path/tailoring-file.json"\n\n[[customizations.files]]\npath = "/some/path/tailoring-file.json"\ndata = "<json-tailoring-file-contents>"\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"fips",children:"FIPS \ud83d\udd35 \ud83d\udfe4"}),"\n",(0,t.jsxs)(n.p,{children:["Enables/disables the system FIPS mode (disabled by default).\nCurrently only ",(0,t.jsx)(n.code,{children:"edge-raw-image"}),", ",(0,t.jsx)(n.code,{children:"edge-installer"}),", ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"}),",\n",(0,t.jsx)(n.code,{children:"edge-ami"})," and ",(0,t.jsx)(n.code,{children:"edge-vsphere"})," images support this customization."]}),"\n",(0,t.jsxs)(r.A,{values:a._t,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"[customizations]\nfips = true\n"})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "fips": {\n      "enabled": true\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"architecture",children:"Architecture \ud83d\udfe4"}),"\n",(0,t.jsx)(n.p,{children:"Select the target architecture the image should be built for.\nOn premises, we don't support multi-arch builds. The architecture of the image is determined by the architecture of the host."}),"\n",(0,t.jsxs)(r.A,{values:a.Di,defaultValue:"hosted",children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "image_requests": [\n    { "architecture": "x86_64" }\n  ]\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})})]}),"\n",(0,t.jsx)(n.h3,{id:"installer",children:"Installer \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsx)(n.p,{children:"Anaconda installer (ISO) image types support the following extra customizations."}),"\n",(0,t.jsxs)(r.A,{values:a.dS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer]\nunattended = true\nsudo-nopasswd = ["user", "%wheel"]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "installer": {\n      "unattended": true,\n      "sudo-nopasswd": ["user", "%wheel"]\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer]\nunattended = true\nsudo-nopasswd = ["user", "%wheel"]\n'})})})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"unattended"}),": creates a kickstart file that makes the installation fully automatic. This includes setting the following options by default:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"text"})," display mode."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"en_US.UTF-8"})," language/locale."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"us"})," keyboard layout."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"UTC"})," timezone."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"zerombr"}),", ",(0,t.jsx)(n.code,{children:"clearpart"}),", and ",(0,t.jsx)(n.code,{children:"autopart"})," to automatically wipe and partition the first disk."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"network"})," options to enable dhcp and auto-activation."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Or, in plain kickstart form:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"liveimg --url file:///run/install/repo/liveimg.tar.gz\nlang en_US.UTF-8\nkeyboard us\ntimezone UTC\nzerombr\nclearpart --all --initlabel\ntext\nautopart --type=plain --fstype=xfs --nohome\nreboot --eject\nnetwork --device=link --bootproto=dhcp --onboot=on --activate\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Blueprint customizations that match the kickstart options (",(0,t.jsx)(n.code,{children:"languages"}),", ",(0,t.jsx)(n.code,{children:"keyboard"}),", ",(0,t.jsx)(n.code,{children:"timezone"}),") will change the value in the kickstart file as well."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sudo-nopasswd"}),": adds a snippet to the kickstart file that, after installation, will create drop-in files in ",(0,t.jsx)(n.code,{children:"/etc/sudoers.d"})," to allow the specified users and groups to run ",(0,t.jsx)(n.code,{children:"sudo"})," without a password (groups must be prefixed with ",(0,t.jsx)(n.code,{children:"%"}),"). For example, setting the value to ",(0,t.jsx)(n.code,{children:'["user", "%wheel"]'})," will create the following kickstart ",(0,t.jsx)(n.code,{children:"%post"})," section:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'%post\necho -e "user\\tALL=(ALL)\\tNOPASSWD: ALL" > "/etc/sudoers.d/user"\nchmod 0440 /etc/sudoers.d/user\necho -e "%wheel\\tALL=(ALL)\\tNOPASSWD: ALL" > "/etc/sudoers.d/%wheel"\nchmod 0440 /etc/sudoers.d/%wheel\nrestorecon -rvF /etc/sudoers.d\n%end\n'})}),"\n",(0,t.jsx)(n.h4,{id:"installer-kickstart",children:"Installer Kickstart \ud83d\udd35 \ud83d\udfe4 \ud83d\udfe3"}),"\n",(0,t.jsx)(n.p,{children:"Alternatively, a custom kickstart can be included using the following customization."}),"\n",(0,t.jsxs)(r.A,{values:a.dS,children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer.kickstart]\ncontents = """\ntext --non-interactive\nzerombr\nclearpart --all --initlabel --disklabel=gpt\nautopart --noswap --type=lvm\nnetwork --bootproto=dhcp --device=link --activate --onboot=on\n"""\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "customizations": {\n    "installer": {\n      "kickstart": {\n        "contents": "text --non-interactive\\nzerombr\\nclearpart --all --initlabel --disklabel=gpt\\nautopart --noswap --type=lvm\\nnetwork --bootproto=dhcp --device=link --activate --onboot=on"\n      }\n    }\n  }\n}\n'})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer.kickstart]\ncontents = """\ntext --non-interactive\nzerombr\nclearpart --all --initlabel --disklabel=gpt\nautopart --noswap --type=lvm\nnetwork --bootproto=dhcp --device=link --activate --onboot=on\n"""\n'})})})]}),"\n",(0,t.jsxs)(n.p,{children:["Note that osbuild-composer will automatically add the command that installs the system (",(0,t.jsx)(n.code,{children:"liveimg"})," or ",(0,t.jsx)(n.code,{children:"ostreesetup"}),") if one is relevant for the image type (",(0,t.jsx)(n.code,{children:"image-installer"})," and ",(0,t.jsx)(n.code,{children:"edge-installer"}),"/",(0,t.jsx)(n.code,{children:"iot-installer"})," respectively), so this line or any line that conflicts with it should not be included. See the relevant ",(0,t.jsx)(n.a,{href:"https://pykickstart.readthedocs.io/en/latest/kickstart-docs.html#ostreecontainer",children:"Kickstart documentation"})," for more information.\nThis customization cannot be used in combination with any other installer customizations."]}),"\n",(0,t.jsx)(n.h4,{id:"anaconda-modules",children:"Anaconda Modules \ud83d\udfe3"}),"\n",(0,t.jsx)(n.p,{children:"The Anaconda installer can be configured by enabling or disabling its D-Bus modules."}),"\n",(0,t.jsxs)(r.A,{values:a.mS,defaultValue:"bootc",children:[(0,t.jsx)(l.A,{value:"on-premises",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer.modules]\nenable = [\n    "org.fedoraproject.Anaconda.Modules.Localization",\n]\ndisable = [\n    "org.fedoraproject.Anaconda.Modules.Users",\n]\n'})})}),(0,t.jsx)(l.A,{value:"hosted",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u2139\ufe0f - Currently not supported\n"})})}),(0,t.jsx)(l.A,{value:"bootc",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[customizations.installer.modules]\nenable = [\n    "org.fedoraproject.Anaconda.Modules.Localization",\n]\ndisable = [\n    "org.fedoraproject.Anaconda.Modules.Users",\n]\n'})})})]}),"\n",(0,t.jsx)(n.p,{children:"The following module names are known and supported:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Localization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Network"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Payloads"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Runtime"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Security"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Services"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Storage"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Subscription"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Timezone"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Users"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["Note: The values are ",(0,t.jsx)(n.strong,{children:"not validated"}),". Any name listed under ",(0,t.jsx)(n.code,{children:"enable"})," will be added to the Anaconda configuration. This way, new or unknown modules can be enabled. However, it also means that mistyped or incorrect values may cause Anaconda to fail to start."]})}),"\n",(0,t.jsx)(n.p,{children:"By default, the following modules are enabled for all Anaconda ISOs:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Network"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Payloads"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Storage"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Other modules are automatically enabled based on the ISO type and blueprint customizations. For example, adding a ",(0,t.jsx)(n.code,{children:"user"})," customization to an ISO build will enable the ",(0,t.jsx)(n.code,{children:"org.fedoraproject.Anaconda.Modules.Users"})," module."]}),"\n",(0,t.jsx)(n.h5,{id:"enable-vs-disable-priority",children:"Enable vs Disable priority"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"disable"})," list is processed after the ",(0,t.jsx)(n.code,{children:"enable"})," list and therefore takes priority. In other words, adding the same module in both ",(0,t.jsx)(n.code,{children:"enable"})," and ",(0,t.jsx)(n.code,{children:"disable"})," will result in the module being ",(0,t.jsx)(n.strong,{children:"disabled"}),".\nFurthermore, adding a module that is enabled by default to ",(0,t.jsx)(n.code,{children:"disable"})," will result in the module being ",(0,t.jsx)(n.strong,{children:"disabled"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"example-blueprints",children:"Example Blueprints"}),"\n",(0,t.jsx)(n.h3,{id:"multiple-customizations",children:"Multiple customizations"}),"\n",(0,t.jsx)(n.p,{children:"The following blueprint example will:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["install the ",(0,t.jsx)(n.code,{children:"tmux"}),", ",(0,t.jsx)(n.code,{children:"git"}),", and ",(0,t.jsx)(n.code,{children:"vim-enhanced"})," packages"]}),"\n",(0,t.jsx)(n.li,{children:"set the hostname"}),"\n",(0,t.jsx)(n.li,{children:"set the root ssh key"}),"\n",(0,t.jsx)(n.li,{children:"add the groups: widget, admin users and students"}),"\n",(0,t.jsx)(n.li,{children:"set the minimal size of root filesystem."}),"\n",(0,t.jsxs)(n.li,{children:["set the ",(0,t.jsx)(n.code,{children:"CIS Red Hat Enterprise Linux 8 Benchmark for Level 2"})," OpenSCAP\nprofile."]}),"\n",(0,t.jsxs)(n.li,{children:["customize the OpenSCAP profile above by enabling the ",(0,t.jsx)(n.code,{children:"bind_crypto_policy"}),"\nand disabling the ",(0,t.jsx)(n.code,{children:"grub2_password"})," content rules"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'name = "example-custom-base"\ndescription = "A base system with customizations"\nversion = "0.0.1"\n\n[[packages]]\nname = "tmux"\nversion = "*"\n\n[[packages]]\nname = "git"\nversion = "*"\n\n[[packages]]\nname = "vim-enhanced"\nversion = "*"\n\n[customizations]\nhostname = "custombase"\n\n[[customizations.sshkey]]\nuser = "root"\nkey = "A SSH KEY FOR ROOT"\n\n[[customizations.user]]\nname = "widget"\ndescription = "Widget process user account"\nhome = "/srv/widget/"\nshell = "/usr/bin/false"\ngroups = ["dialout", "users"]\n\n[[customizations.user]]\nname = "admin"\ndescription = "Widget admin account"\npassword = "$6$CHO2$3rN8eviE2t50lmVyBYihTgVRHcaecmeCk31LeOUleVK/R/aeWVHVZDi26zAH.o0ywBKH9Tc0/wm7sW/q39uyd1"\nhome = "/srv/widget/"\nshell = "/usr/bin/bash"\ngroups = ["widget", "users", "students"]\nuid = 1200\n\n[[customizations.user]]\nname = "plain"\npassword = "simple plain password"\n\n[[customizations.user]]\nname = "bart"\nkey = "SSH KEY FOR BART"\ngroups = ["students"]\n\n[[customizations.group]]\nname = "widget"\n\n[[customizations.group]]\nname = "students"\n\n[[customizations.filesystem]]\nmountpoint = "/"\nminsize = 2147483648\n\n[customizations.openscap]\ndatastream = "/usr/share/xml/scap/ssg/content/ssg-rhel8-ds.xml"\nprofile_id = "xccdf_org.ssgproject.content_profile_cis"\n\n[customizations.openscap.tailoring]\nselected = [ "xccdf_org.ssgproject.content_bind_crypto_policy" ]\nunselected = [ "grub2_password" ]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"enable-system-fips-mode-in-edge-simplified-installer",children:"Enable system FIPS mode in Edge Simplified installer"}),"\n",(0,t.jsxs)(n.p,{children:["The following blueprint example will enable system FIPS mode in\na ",(0,t.jsx)(n.code,{children:"edge-simplified-installer"})," image:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'name = "example-system-fips-mode"\ndescription = "A FIPS enabled base system"\nversion = "0.0.1"\n\n[ostree]\n\nref= "test/edge"\nurl= "http://example.com/repo"\n\n[customizations]\ninstallation_device = "/dev/vda"\nfips = true\n\n[customizations.fdo]\nmanufacturing_server_url = "https://fdo.example.com"\ndiun_pub_key_insecure = true\n'})}),"\n","\n",(0,t.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,t.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{id:"user-content-fn-1",children:["\n",(0,t.jsxs)(n.p,{children:["Arguments written in the alternative syntax have to be ",(0,t.jsx)(n.em,{children:"before"})," any other section! So at the beginning\nof the file before any line beginning with a square bracket. ",(0,t.jsx)(n.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})," ",(0,t.jsxs)(n.a,{href:"#user-content-fnref-1-2","data-footnote-backref":"","aria-label":"Back to reference 1-2",className:"data-footnote-backref",children:["\u21a9",(0,t.jsx)(n.sup,{children:"2"})]})," ",(0,t.jsxs)(n.a,{href:"#user-content-fnref-1-3","data-footnote-backref":"","aria-label":"Back to reference 1-3",className:"data-footnote-backref",children:["\u21a9",(0,t.jsx)(n.sup,{children:"3"})]})]}),"\n"]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},49489:(e,n,s)=>{s.d(n,{A:()=>w});var i=s(96540),t=s(34164),o=s(24245),r=s(56347),l=s(36494),a=s(62814),d=s(45167),c=s(69900);function h(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:s}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return h(e).map((({props:{value:e,label:n,attributes:s,default:i}})=>({value:e,label:n,attributes:s,default:i})))}(s);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function m({queryString:e=!1,groupId:n}){const s=(0,r.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,a.aZ)(t),(0,i.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})}),[t,s])]}function x(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,o=u(e),[r,a]=(0,i.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:o}))),[d,h]=m({queryString:s,groupId:t}),[x,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,t]=(0,c.Dv)(n);return[s,(0,i.useCallback)((e=>{n&&t.set(e)}),[n,t])]}({groupId:t}),g=(()=>{const e=d??x;return p({value:e,tabValues:o})?e:null})();(0,l.A)((()=>{g&&a(g)}),[g]);return{selectedValue:r,selectValue:(0,i.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);a(e),h(e),j(e)}),[h,j,o]),tabValues:o}}var j=s(11062);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=s(74848);function b({className:e,block:n,selectedValue:s,selectValue:i,tabValues:r}){const l=[],{blockElementScrollPositionUntilNextRender:a}=(0,o.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),o=r[t].value;o!==s&&(a(n),i(o))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=l.indexOf(e.currentTarget)+1;n=l[s]??l[0];break}case"ArrowLeft":{const s=l.indexOf(e.currentTarget)-1;n=l[s]??l[l.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:r.map((({value:e,label:n,attributes:i})=>(0,f.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>l.push(e),onKeyDown:c,onClick:d,...i,className:(0,t.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":s===e}),children:n??e},e)))})}function v({lazy:e,children:n,selectedValue:s}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===s));return e?(0,i.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=x(e);return(0,f.jsxs)("div",{className:(0,t.A)("tabs-container",g.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(v,{...n,...e})]})}function w(e){const n=(0,j.A)();return(0,f.jsx)(y,{...e,children:h(e.children)},String(n))}},78955:(e,n,s)=>{s.d(n,{A9:()=>o,Ay:()=>d,Di:()=>r,_t:()=>t,dS:()=>a,mS:()=>l});s(96540);var i=s(74848);const t=[{label:"\ud83d\udd35 on premises",value:"on-premises",attributes:{className:"highlight tab on-premises"}},{label:"\ud83d\udfe4 hosted",value:"hosted",attributes:{className:"highlight tab hosted"}},{label:"\u26aa bootc",value:"bootc",attributes:{className:"highlight tab disabled"}}],o=[{label:"\ud83d\udd35 on premises",value:"on-premises",attributes:{className:"highlight tab on-premises"}},{label:"\u26aa hosted",value:"hosted",attributes:{className:"highlight tab disabled"}},{label:"\u26aa bootc",value:"bootc",attributes:{className:"highlight tab disabled"}}],r=[{label:"\u26aa on premises",value:"on-premises",attributes:{className:"highlight tab disabled"}},{label:"\ud83d\udfe4 hosted",value:"hosted",attributes:{className:"highlight tab hosted"}},{label:"\u26aa bootc",value:"bootc",attributes:{className:"highlight tab disabled"}}],l=[{label:"\ud83d\udd35 on premises",value:"on-premises",attributes:{className:"highlight tab on-premises"}},{label:"\u26aa hosted",value:"hosted",attributes:{className:"highlight tab disabled"}},{label:"\ud83d\udfe3 bootc",value:"bootc",attributes:{className:"highlight tab bootc"}}],a=[{label:"\ud83d\udd35 on premises",value:"on-premises",attributes:{className:"highlight tab on-premises"}},{label:"\ud83d\udfe4 hosted",value:"hosted",attributes:{className:"highlight tab hosted"}},{label:"\ud83d\udfe3 bootc",value:"bootc",attributes:{className:"highlight tab bootc"}}];function d({children:e,colorVar:n}){return(0,i.jsx)("span",{className:`highlight box ${n}`,children:e})}},24594:(e,n,s)=>{s.d(n,{A:()=>a});s(96540);var i=s(34164);const t={tabItem:"tabItem_Ymn6"};var o=s(74848);function r({children:e,hidden:n,className:s}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,i.A)(t.tabItem,s),hidden:n,children:e})}const l={hiddenTabItem:"hiddenTabItem_yFfl",contextLabel:"contextLabel_iHeY"};function a(e){const{hidden:n,value:s,...i}=e;return(0,o.jsxs)("div",{className:n?l.hiddenTabItem:"","data-tab-hidden":n,"data-tab-value":s,children:[(0,o.jsx)("div",{className:l.contextLabel,children:(t=s,"on-premises"===t?"On premises example:":"hosted"===t?"Hosted example:":"bootc"===t?"Bootc example:":`${t} example:`)}),(0,o.jsx)(r,{...i})]});var t}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(96540);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);