"use strict";(self.webpackChunksaurus=self.webpackChunksaurus||[]).push([[3915],{8781:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>n,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"user-guide/repository-customizations","title":"Third-party Repositories","description":"osbuild-composer supports adding packages from third-party repositories and saving the repository customizations","source":"@site/docs/user-guide/02-repository-customizations.md","sourceDirName":"user-guide","slug":"/user-guide/repository-customizations","permalink":"/docs/user-guide/repository-customizations","draft":false,"unlisted":false,"editUrl":"https://github.com/osbuild/osbuild.github.io/tree/main/docs/user-guide/02-repository-customizations.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"userguide","previous":{"title":"Blueprint Reference","permalink":"/docs/user-guide/blueprint-reference"},"next":{"title":"OpenSCAP Remediation","permalink":"/docs/user-guide/oscap-remediation"}}');var s=t(4848),o=t(8453);const n={},a="Third-party Repositories",d={},c=[{value:"1. Install a third-party package",id:"1-install-a-third-party-package",level:2},{value:"2. Save repository configurations",id:"2-save-repository-configurations",level:2},{value:"3. Install a third-party package and save configurations",id:"3-install-a-third-party-package-and-save-configurations",level:2}];function l(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"third-party-repositories",children:"Third-party Repositories"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"osbuild-composer"})," supports adding packages from third-party repositories and saving the repository customizations\nto an image. This guide aims to clarify each usecase and how to configure ",(0,s.jsx)(i.code,{children:"osbuild-composer"})," and\nthe blueprints accordingly."]}),"\n",(0,s.jsxs)(i.p,{children:["Very importantly, ",(0,s.jsx)(i.code,{children:"osbuild-composer"})," has two distinct definitions of third-party repositories. Firstly, ",(0,s.jsx)(i.strong,{children:"payload repositories"})," which can be used to install third-party packages at build time and,\nsecondly, ",(0,s.jsx)(i.strong,{children:"custom repositories"})," which are used to persist the repository configurations to the image."]}),"\n",(0,s.jsx)(i.p,{children:"This could lead to the following desired usecases:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Install a third-party package"}),"\n",(0,s.jsx)(i.li,{children:"Save the third-party repository configurations to the image"}),"\n",(0,s.jsxs)(i.li,{children:["Install a third-party package ",(0,s.jsx)(i.strong,{children:"and"})," save the configurations"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"1-install-a-third-party-package",children:"1. Install a third-party package"}),"\n",(0,s.jsxs)(i.p,{children:["To install a third-party package at build time, it is necessary to enable the required third-party repository as a payload repository. This will not save any of the repository configurations\nto the image and will not make the repositories available to users on the system after the image has been built. For further information on how to install and configure ",(0,s.jsx)(i.code,{children:"osbuild-composer"}),"\nto use custom repositories for installing third-party packages, continue reading ",(0,s.jsx)(i.a,{href:"/docs/on-premises/installation/managing-repositories",children:"here"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"2-save-repository-configurations",children:"2. Save repository configurations"}),"\n",(0,s.jsxs)(i.p,{children:["In the second scenario, to make third-party repository configurations persistent and make the repositories available to users on the system, one would use the blueprint ",(0,s.jsx)(i.code,{children:"custom repository"}),"\nconfigurations to enable this. The repository will be configured and saved to ",(0,s.jsx)(i.code,{children:"/etc/yum.repos.d"})," as a ",(0,s.jsx)(i.code,{children:".repo"})," file. GPG keys are not imported at build time, but are imported when first\ninstalling a third-party package from the desired repository. You can find the blueprint reference for custom repositories ",(0,s.jsx)(i.a,{href:"/docs/user-guide/blueprint-reference",children:"here"}),"."]}),"\n",(0,s.jsx)(i.h2,{id:"3-install-a-third-party-package-and-save-configurations",children:"3. Install a third-party package and save configurations"}),"\n",(0,s.jsx)(i.p,{children:"In this case it is necessary to use a combination of payload repositories and custom repositories in order to achieve the desired outcome. This will ensure that the package is installed during\nbuild time and the repository configuration is saved to disk for future use. If the user only needs the package or the configuration file, they can use the appropriate repository type to achieve\ntheir goal."})]})}function p(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,i,t)=>{t.d(i,{R:()=>n,x:()=>a});var r=t(6540);const s={},o=r.createContext(s);function n(e){const i=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),r.createElement(o.Provider,{value:i},e.children)}}}]);